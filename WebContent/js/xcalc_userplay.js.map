{"version":3,"file":"xcalc_userplay.js","sourceRoot":"","sources":["../ts/xcalc_userplay.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AA2BA;IAAkC,uCAAe;IAG7C,6BAAmB,OAA2C,EAAE,yBAA0C,EAAE,SAA0B;QAAnH,wBAAA,EAAA,mCAA2C;QAAE,0CAAA,EAAA,gCAA0C;QAAE,0BAAA,EAAA,iBAA0B;QAClI,YAAA,MAAK,YAAC,OAAO,EAAE,yBAAyB,EAAE,SAAS,CAAC,SAAC;QAH/C,mBAAa,GAA8B,EAAE,CAAC;QAC9C,2BAAqB,GAAW,CAAC,CAAC;;IAG5C,CAAC;IAAA,CAAC;IACK,0CAAY,GAAnB;QACI,OAAO,qBAAqB,CAAC;IACjC,CAAC;IAAA,CAAC;IACQ,8CAAgB,GAA1B;QACI,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAElB,IAAI,eAAe,GAAuB,IAAI,8BAA8B,EAAE,CAAC;QAE/E,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACvC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,4BAA4B,EAAE,CAAC,CAAC;QAE1D,IAAI,kBAAkB,GAAW,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QACxE,IAAI,kBAAkB,IAAI,IAAI,EAAE,CAAC;YAC7B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,uBAAuB,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACzE,IAAI,CAAC,qBAAqB,GAAG,CAAC,CAAC;QACnC,CAAC;aAAM,CAAC;YACJ,IAAI,iBAAiB,GAAW,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC;YAC/D,IAAI,iBAAiB,GAAa,iBAAiB,CAAC,SAAS,CAAC,CAAC;YAC/D,IAAI,iBAAiB,IAAI,IAAI,IAAI,OAAO,CAAC,iBAAiB,CAAC,IAAI,WAAW;gBAAE,iBAAiB,GAAG,EAAE,CAAC;YACnG,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,iBAAiB,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBACtD,IAAI,SAAS,GAAG,CAAC,eAAe,CAAC,sBAAsB,CAAC,iBAAiB,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAA4B,CAAC;gBAClH,IAAI,SAAS,IAAI,IAAI;oBAAE,SAAS;gBAChC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACvC,CAAC;YAED,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC;gBACjC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,uBAAuB,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBACzE,IAAI,CAAC,qBAAqB,GAAG,CAAC,CAAC;YACnC,CAAC;iBAAM,CAAC;gBACJ,IAAI,cAAc,GAAG,iBAAiB,CAAC,UAAU,CAAC,CAAC;gBACnD,IAAI,cAAc,IAAI,IAAI,IAAI,OAAO,CAAC,cAAc,CAAC,IAAI,WAAW;oBAAE,cAAc,GAAG,CAAC,CAAC;gBACzF,IAAI,WAAW,GAAW,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;gBAC3D,IAAI,CAAC,qBAAqB,GAAG,WAAW,CAAC;YAC7C,CAAC;QACL,CAAC;QAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC;QAClE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,qBAAqB,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;QAC1E,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,qBAAqB,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;QAC1E,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,qBAAqB,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;QAE1E,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,oBAAoB,EAAE,CAAC,CAAC;QACnD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,kBAAkB,EAAE,CAAC,CAAC;QAEjD,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,sBAAsB,IAAI,IAAI,EAAE,CAAC;YACjC,sBAAsB,GAAG,UAAU,QAAQ;gBACvC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACpC,OAAO,CAAC,WAAW,EAAE,CAAC;YAC1B,CAAC,CAAC;YACF,wBAAwB,GAAG,UAAU,UAAU;gBAC3C,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBACrC,OAAO,CAAC,WAAW,EAAE,CAAC;YAC1B,CAAC,CAAC;QACN,CAAC;QAED,IAAI,mBAAmB,GAAG,IAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC;QACjE,IAAI,kBAAkB,GAAG,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,CAAC;QAC/D,IAAI,gBAAgB,GAAG,IAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC;QAC9D,IAAI,mBAAmB,IAAI,IAAI,IAAI,OAAO,CAAC,mBAAmB,CAAC,IAAI,WAAW,IAAI,mBAAmB,IAAI,EAAE,EAAE,CAAC;YAC1G,IAAI,gBAAgB,EAAE,IAAI,SAAS,IAAI,gBAAgB,EAAE,IAAI,kBAAkB,EAAE,CAAC;gBAC9E,mBAAmB,GAAG,OAAO,CAAC;YAClC,CAAC;iBAAM,CAAC;gBACJ,mBAAmB,GAAG,MAAM,CAAC;YACjC,CAAC;YACD,IAAI,CAAC,WAAW,CAAC,oBAAoB,EAAE,mBAAmB,CAAC,CAAC;QAChE,CAAC;QAED,IAAI,kBAAkB,IAAI,IAAI,IAAI,OAAO,CAAC,kBAAkB,CAAC,IAAI,WAAW,IAAI,kBAAkB,IAAI,EAAE,EAAE,CAAC;YACvG,IAAI,gBAAgB,EAAE,IAAI,SAAS,EAAE,CAAC;gBAClC,kBAAkB,GAAG,OAAO,CAAC;YACjC,CAAC;iBAAM,CAAC;gBACJ,kBAAkB,GAAG,MAAM,CAAC;YAChC,CAAC;YACD,IAAI,CAAC,WAAW,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QAC9D,CAAC;QAED,IAAI,gBAAgB,IAAI,IAAI,IAAI,OAAO,CAAC,gBAAgB,CAAC,IAAI,WAAW,IAAI,gBAAgB,IAAI,EAAE,EAAE,CAAC;YACjG,gBAAgB,GAAG,KAAK,CAAC;YACzB,IAAI,iBAAiB,CAAC,mBAAmB,CAAC;gBAAE,gBAAgB,GAAG,KAAK,CAAC;YACrE,IAAI,CAAC,WAAW,CAAC,oBAAoB,EAAE,gBAAgB,CAAC,CAAC;QAC7D,CAAC;IACL,CAAC;IAAA,CAAC;IACQ,gDAAkB,GAA5B;QACI,IAAI,iBAAiB,GAAa,EAAE,CAAC;QACrC,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YACvD,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC;QACxE,CAAC;QACD,IAAI,iBAAiB,GAAG,EAAE,CAAC;QAC3B,iBAAiB,CAAC,SAAS,CAAC,GAAG,iBAAiB,CAAC;QACjD,iBAAiB,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,qBAAqB,CAAC;QAC3D,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,CAAC;QAC1E,IAAI,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAAA,CAAC;IACQ,yCAAW,GAArB;QACI,IAAI,gBAAgB,GAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAC9E,gBAAgB,CAAC,KAAK,EAAE,CAAC;QACzB,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YACvD,IAAI,GAAG,IAAI,IAAI,CAAC,qBAAqB,EAAE,CAAC;gBACpC,gBAAgB,CAAC,MAAM,CAAC,iBAAiB,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,GAAG,wBAAwB,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,GAAG,WAAW,CAAC,CAAC;YACpK,CAAC;iBAAM,CAAC;gBACJ,gBAAgB,CAAC,MAAM,CAAC,iBAAiB,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,GAAG,WAAW,CAAC,CAAC;YAChJ,CAAC;QACL,CAAC;QAED,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,KAAK,EAAE,CAAC;QACnD,IAAI,OAAO,GAAG,EAAE,CAAC;QACjB,OAAO,IAAI,iDAAiD,GAAG,IAAI,CAAC;QACpE,OAAO,IAAI,+CAA+C,GAAG,IAAI,CAAC;QAClE,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC;YAC3B,OAAO,IAAI,gDAAgD,GAAG,IAAI,CAAC;YACnE,OAAO,IAAI,4CAA4C,GAAG,IAAI,CAAC;YAC/D,OAAO,IAAI,wCAAwC,GAAG,uBAAuB,CAAC,UAAU,CAAC,4BAA4B,CAAC,CAAC,GAAG,SAAS,GAAG,IAAI,CAAC;YAC3I,OAAO,IAAI,cAAc,GAAG,IAAI,CAAC;YACjC,OAAO,IAAI,UAAU,GAAG,IAAI,CAAC;QACjC,CAAC;aAAM,CAAC;YACJ,KAAK,IAAI,GAAG,GAAW,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBACzD,IAAI,aAAa,GAAgB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBACnD,OAAO,IAAI,yCAAyC,GAAG,oBAAoB,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC;gBACvH,OAAO,IAAI,uCAAuC,GAAG,IAAI,CAAC;gBAC1D,OAAO,IAAI,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,CAAC;gBAClD,OAAO,IAAI,cAAc,GAAG,IAAI,CAAC;gBACjC,OAAO,IAAI,UAAU,GAAG,IAAI,CAAC;YACjC,CAAC;QACL,CAAC;QAED,OAAO,IAAI,8CAA8C,GAAG,IAAI,CAAC;QACjE,OAAO,IAAI,iDAAiD,GAAG,IAAI,CAAC;QACpE,OAAO,IAAI,aAAa,GAAG,IAAI,CAAC;QAChC,OAAO,IAAI,UAAU,GAAG,IAAI,CAAC;QAC7B,OAAO,IAAI,UAAU,GAAG,IAAI,CAAC;QAC7B,OAAO,IAAI,QAAQ,GAAG,IAAI,CAAC;QAC3B,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,CAAC;QAE5E,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC;YAC3B,IAAI,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;YAC9D,SAAS,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YACjC,SAAS,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;YACvC,SAAS,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;QACnC,CAAC;QAED,IAAI,SAAS,GAAW,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC;QACzD,IAAI,SAAS,GAAG,GAAG;YAAE,SAAS,GAAG,GAAG,CAAC;QAErC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;QAEzB,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,CAAC,YAAY,EAAE,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,CAAC;QACtF,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,CAAC,YAAY,EAAE,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,CAAC;QAEtF,IAAI,WAAW,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAC5D,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC;QACpC,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YACtD,WAAW,CAAC,MAAM,CAAC,iBAAiB,CAAC,iBAAiB,GAAG,GAAG,GAAG,IAAI,GAAG,uBAAuB,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;QAChK,CAAC;QACD,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAEpC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;QAE/B,KAAK,IAAI,GAAG,GAAW,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YACzD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACxC,CAAC;IACL,CAAC;IAAA,CAAC;IACQ,0CAAY,GAAtB;QACI,IAAI,OAAO,GAAW,EAAE,CAAC;QACzB,OAAO,IAAI,0CAA0C,GAAG,IAAI,CAAC;QAC7D,OAAO,IAAI,6BAA6B,GAAG,IAAI,CAAC;QAChD,OAAO,IAAI,8CAA8C,GAAG,IAAI,CAAC;QACjE,OAAO,IAAI,mCAAmC,GAAG,uBAAuB,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO,GAAG,IAAI,CAAC;QAChH,OAAO,IAAI,YAAY,GAAG,IAAI,CAAC;QAC/B,OAAO,IAAI,gCAAgC,GAAG,IAAI,CAAC;QACnD,OAAO,IAAI,iEAAiE,GAAG,IAAI,CAAC;QACpF,OAAO,IAAI,kFAAkF,GAAG,IAAI,CAAC;QACrG,OAAO,IAAI,kFAAkF,GAAG,IAAI,CAAC;QACrG,OAAO,IAAI,YAAY,GAAG,IAAI,CAAC;QAC/B,OAAO,IAAI,SAAS,GAAG,IAAI,CAAC;QAC5B,OAAO,IAAI,6BAA6B,GAAG,IAAI,CAAC;QAChD,OAAO,IAAI,2DAA2D,GAAG,IAAI,CAAC;QAE9E,OAAO,IAAI,YAAY,GAAG,IAAI,CAAC;QAC/B,OAAO,IAAI,SAAS,GAAG,IAAI,CAAC;QAC5B,OAAO,IAAI,6BAA6B,GAAG,IAAI,CAAC;QAChD,OAAO,IAAI,4DAA4D,GAAG,IAAI,CAAC;QAC/E,OAAO,IAAI,8DAA8D,GAAG,IAAI,CAAC;QACjF,OAAO,IAAI,oEAAoE,GAAG,uBAAuB,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,GAAG,WAAW,GAAG,IAAI,CAAC;QACzJ,OAAO,IAAI,6DAA6D,GAAG,IAAI,CAAC;QAChF,OAAO,IAAI,YAAY,GAAG,IAAI,CAAC;QAC/B,OAAO,IAAI,gFAAgF,GAAG,IAAI,CAAC;QACnG,OAAO,IAAI,YAAY,GAAG,IAAI,CAAC;QAC/B,OAAO,IAAI,SAAS,GAAG,IAAI,CAAC;QAC5B,OAAO,IAAI,UAAU,GAAG,IAAI,CAAC;QAC7B,OAAO,OAAO,CAAC;IACnB,CAAC;IAAA,CAAC;IACQ,gDAAkB,GAA5B,UAA6B,MAAmB;QAC5C,IAAI,OAAO,GAAW,EAAE,CAAC;QACzB,OAAO,IAAI,+CAA+C,GAAG,IAAI,CAAC;QAClE,OAAO,IAAI,eAAe,GAAG,IAAI,CAAC;QAClC,OAAO,IAAI,4DAA4D,GAAG,IAAI,CAAC;QAC/E,OAAO,IAAI,sDAAsD,GAAG,IAAI,CAAC;QACzE,OAAO,IAAI,gBAAgB,GAAG,IAAI,CAAC;QACnC,OAAO,IAAI,gBAAgB,GAAG,IAAI,CAAC;QACnC,OAAO,IAAI,YAAY,GAAG,IAAI,CAAC;QAC/B,OAAO,IAAI,kCAAkC,GAAG,IAAI,CAAC;QACrD,OAAO,IAAI,6DAA6D,GAAG,IAAI,CAAC;QAChF,OAAO,IAAI,iDAAiD,GAAG,uBAAuB,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,GAAG,SAAS,GAAG,IAAI,CAAC;QAC9H,OAAO,IAAI,iBAAiB,GAAG,IAAI,CAAC;QACpC,OAAO,IAAI,uDAAuD,GAAG,IAAI,CAAC;QAC1E,IAAI,kBAAkB,GAAW,EAAE,CAAC;QACpC,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE;YAAE,kBAAkB,GAAG,WAAW,CAAC;QAC/D,OAAO,IAAI,oFAAoF,GAAG,kBAAkB,GAAG,gBAAgB,GAAG,oBAAoB,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,GAAG,WAAW,GAAG,oBAAoB,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,GAAG,GAAG,GAAG,kBAAkB,GAAG,IAAI,GAAG,IAAI,CAAC;QACrR,OAAO,IAAI,iBAAiB,GAAG,IAAI,CAAC;QACpC,OAAO,IAAI,iDAAiD,GAAG,IAAI,CAAC;QACpE,IAAI,UAAU,GAAG,MAAM,CAAC,cAAc,EAAE,CAAC;QACzC,IAAI,UAAU,IAAI,IAAI;YAAE,OAAO,IAAI,UAAU,CAAC;QAC9C,OAAO,IAAI,iBAAiB,GAAG,IAAI,CAAC;QACpC,OAAO,IAAI,cAAc,GAAG,IAAI,CAAC;QACjC,OAAO,IAAI,kCAAkC,GAAG,IAAI,CAAC;QACrD,OAAO,IAAI,6DAA6D,GAAG,IAAI,CAAC;QAChF,OAAO,IAAI,iDAAiD,GAAG,uBAAuB,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,GAAG,SAAS,GAAG,IAAI,CAAC;QAC9H,OAAO,IAAI,iBAAiB,GAAG,IAAI,CAAC;QACpC,OAAO,IAAI,uDAAuD,GAAG,IAAI,CAAC;QAC1E,OAAO,IAAI,sDAAsD,GAAG,uBAAuB,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,EAAE,CAAC,CAAC,GAAG,SAAS,GAAG,IAAI,CAAC;QACvJ,OAAO,IAAI,iBAAiB,GAAG,IAAI,CAAC;QACpC,OAAO,IAAI,cAAc,GAAG,IAAI,CAAC;QACjC,OAAO,IAAI,aAAa,GAAG,IAAI,CAAC;QAChC,OAAO,IAAI,UAAU,GAAG,IAAI,CAAC;QAC7B,OAAO,OAAO,CAAC;IACnB,CAAC;IAAA,CAAC;IAEQ,yCAAW,GAArB;QACI,IAAI,IAAI,CAAC,WAAW;YAAE,OAAO;QAC7B,IAAI,IAAI,CAAC,cAAc;YAAE,OAAO;QAChC,IAAI,IAAI,CAAC,UAAU;YAAE,OAAO;QAC5B,IAAI,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,QAAQ,CAAC;YAAE,OAAO;QAE/D,IAAI,eAAe,GAAG,EAAE,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,GAAG,EAAE,CAAC;QACnF,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YACvD,IAAI,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;YACrC,IAAI,MAAM,CAAC,WAAW,EAAE,IAAI,eAAe,EAAE,CAAC;gBAC1C,IAAI,CAAC,qBAAqB,GAAG,GAAG,CAAC;YACrC,CAAC;QACL,CAAC;QAED,IAAI,WAAW,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAC5D,IAAI,mBAAmB,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;QAC5C,IAAI,mBAAmB,IAAI,IAAI,EAAE,CAAC;YAC9B,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,mBAAmB,CAAC,CAAC;QACvD,CAAC;QAED,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YACjD,IAAI,SAAS,GAAgB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YAC/C,IAAI,WAAW,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,oBAAoB,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;YACtG,IAAI,WAAW,CAAC,MAAM,IAAI,CAAC;gBAAE,SAAS;YACtC,SAAS,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,EAAE,EAAE,IAAI,CAAC,CAAC;YAC9D,SAAS,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;YACpF,IAAI,SAAS,YAAY,uBAAuB,EAAE,CAAC;gBAC/C,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,qBAAqB,CAAC,GAAG,SAAS,CAAC;YAC/D,CAAC;YACD,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC9B,CAAC;IACL,CAAC;IAAA,CAAC;IAEQ,2CAAa,GAAvB;QACI,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,OAAO,GAAQ,IAAI,CAAC,aAAa,EAAE,CAAC;QACxC,IAAI,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAElC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;QAChD,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;QAEhD,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,0BAA0B,CAAC,EAAE,UAAU,OAAO;YACnF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAClD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,0BAA0B,CAAC,EAAE,UAAU,OAAO;YACnF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAClD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE,UAAU,OAAO;YAC1E,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;QACzC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE,UAAU,OAAO;YAC1E,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;QACzC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,oBAAoB,CAAC,EAAE,UAAU,OAAO;YAC7E,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE,UAAU,OAAO;YAC1E,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;QAC1C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,oBAAoB,CAAC,EAAE,UAAU,OAAO;YAC7E,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,EAAE,UAAU,OAAO;YACxE,kBAAkB,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE,UAAU,OAAO;YAC1E,oBAAoB,EAAE,CAAC;QAC3B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,wBAAwB,CAAC,EAAE,UAAU,OAAO;YACjF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACpD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAE,UAAU,OAAO;YACzE,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC3C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,oBAAoB,CAAC,EAAE,UAAU,OAAO;YAC7E,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE,UAAU,OAAO;YACvE,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QACtC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,EAAE,UAAU,OAAO;YAC3E,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;QACjC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,EAAE,UAAU,OAAO;YACxE,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;QACrE,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAE,UAAU,OAAO;YACzE,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;QACxC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,UAAU,OAAO;YACnE,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;QAClC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,EAAE,UAAU,OAAO;YAC3E,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;QACxC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,EAAE,CAAC,kBAAkB,CAAC,EAAE,UAAU,OAAO;YAChE,OAAO,CAAC,mBAAmB,EAAE,CAAC;QAClC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,EAAE,CAAC,kBAAkB,CAAC,EAAE,UAAU,OAAO;YAChE,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YACpE,kBAAkB,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,EAAE,CAAC,WAAW,CAAC,EAAE,UAAU,OAAO;YACzD,YAAY,EAAE,CAAC;QACnB,CAAC,CAAC,CAAC;IACP,CAAC;IAAA,CAAC;IACQ,2CAAa,GAAvB;QACI,IAAI,OAAO,GAAwB,IAAI,CAAC;QACxC,IAAI,OAAO,GAAQ,IAAI,CAAC,aAAa,EAAE,CAAC;QACxC,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC;QACpB,OAAO,CAAC,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;QACzB,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,GAAG;YACjC,OAAO,CAAC,SAAS,EAAE,CAAC;QACxB,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,uBAAuB,GAAG;YAC1C,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,uBAAuB,CAAC,YAAY,CAAC,CAAC,CAAC;YACtE,OAAO,CAAC,WAAW,EAAE,CAAC;QAC1B,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,uBAAuB,GAAG;YAC1C,IAAI,OAAO,CAAC,aAAa,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC;gBACpC,UAAU,CAAC,UAAU,CAAC,yBAAyB,CAAC,EAAE,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC7E,OAAO;YACX,CAAC;YAED,wBAAwB,CAAC,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC,qBAAqB,CAAC,CAAC;YAC/E,OAAO,CAAC,qBAAqB,GAAG,CAAC,CAAC;YAClC,OAAO,CAAC,WAAW,EAAE,CAAC;QAC1B,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,GAAG;YACjC,IAAI,MAAM,GAAW,EAAE,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,EAAE,CAAC;YAC/E,IAAI,aAAa,GAAuB,IAAI,CAAC;YAC7C,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBACxD,IAAI,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,IAAI,MAAM,EAAE,CAAC;oBACnD,aAAa,GAAG,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;oBACzC,MAAM;gBACV,CAAC;YACL,CAAC;YACD,IAAI,aAAa,IAAI,IAAI,EAAE,CAAC;gBACxB,UAAU,CAAC,UAAU,CAAC,oCAAoC,CAAC,EAAE,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC;gBACxF,OAAO;YACX,CAAC;YAED,IAAI,SAAS,GAAgB,aAAa,CAAC,MAAM,CAAC,aAAa,CAAC,WAAW,EAAE,GAAG,GAAG,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YAC9G,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAChC,OAAO,CAAC,wBAAwB,GAAG,aAAa,CAAC,WAAW,EAAE,CAAC;YAC/D,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAC/B,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,GAAG;YACpC,IAAI,OAAO,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC;gBAAE,OAAO;YACxC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC;YACzD,wBAAwB,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YACtE,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAC/B,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,GAAG;YAClC,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC;YAC5B,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC;gBACzB,OAAO,CAAC,cAAc,GAAG,KAAK,CAAC;gBAC/B,OAAO,CAAC,UAAU,GAAG,KAAK,CAAC;YAC/B,CAAC;YACD,OAAO,CAAC,WAAW,EAAE,CAAC;QAC1B,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,GAAG;YAC9B,OAAO,CAAC,YAAY,GAAG,KAAK,CAAC;YAC7B,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC;gBACzB,OAAO,CAAC,UAAU,GAAG,KAAK,CAAC;gBAC3B,OAAO,CAAC,cAAc,GAAG,KAAK,CAAC;gBAC/B,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;YAChC,CAAC;YACD,OAAO,CAAC,WAAW,EAAE,CAAC;QAC1B,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,GAAG;YACpC,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,WAAW,CAAC,uBAAuB,CAAC,CAAC,EAAE,CAAC;gBACnE,UAAU,CAAC,UAAU,CAAC,gGAAgG,CAAC,CAAC,CAAC;YAC7H,CAAC;YAED,OAAO,CAAC,aAAa,EAAE,CAAC;YACxB,IAAI,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC;gBACxB,OAAO,CAAC,YAAY,GAAG,KAAK,CAAC;gBAC7B,OAAO,CAAC,WAAW,EAAE,CAAC;YAC1B,CAAC;iBAAM,CAAC;gBACJ,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;YACtC,CAAC;YACD,OAAO,CAAC,eAAe,EAAE,CAAC;QAC9B,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,yBAAyB,GAAG;YAC5C,OAAO,CAAC,WAAW,EAAE,CAAC;QAC1B,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,GAAG;YACnC,OAAO,CAAC,WAAW,EAAE,CAAC;YACtB,OAAO,CAAC,mBAAmB,EAAE,CAAC;QAClC,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;QACzB,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,GAAG;YACpC,IAAI,MAAM,GAAgB,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;YACnE,IAAI,IAAI,GAAU,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAClC,wBAAwB,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;YAC1C,MAAM,CAAC,iBAAiB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;YAExC,IAAI,OAAO,CAAC,MAAM,IAAI,IAAI,EAAE,CAAC;gBACzB,IAAI,CAAC;oBACD,IAAI,MAAM,GAAG,IAAI,iBAAiB,EAAE,CAAC;oBACrC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;oBACnB,MAAM,CAAC,iBAAiB,GAAG,OAAO,CAAC,eAAe,CAAC;oBACnD,MAAM,CAAC,oBAAoB,GAAG,CAAC,CAAC,CAAC;oBACjC,MAAM,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;oBACzB,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBACxC,CAAC;gBAAC,OAAO,CAAC,EAAE,CAAC;oBACT,UAAU,CAAC,CAAC,CAAC,CAAC;oBACd,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;gBAC1B,CAAC;YACL,CAAC;YAED,QAAQ,CAAC,QAAQ,GAAG,MAAM,CAAC,OAAO,EAAE,GAAG,MAAM,GAAG,UAAU,CAAC,yBAAyB,CAAC,CAAC,CAAC;YACvF,OAAO,CAAC,QAAQ,EAAE,CAAC;QACvB,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,GAAG,UAAU,YAAoB;YAC7D,IAAI,MAAM,GAAgB,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;YAEnE,IAAI,cAAc,GAAG,EAAE,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,oBAAoB,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,GAAG,aAAa,CAAC,CAAC;YAC9H,IAAI,eAAe,GAAG,cAAc,CAAC,GAAG,EAAE,CAAC;YAC3C,IAAI,eAAe,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC;gBAC9B,UAAU,CAAC,UAAU,CAAC,gCAAgC,CAAC,EAAE,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC;gBACpF,OAAO;YACX,CAAC;YACD,IAAI,eAAe,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBAC7B,UAAU,CAAC,UAAU,CAAC,4BAA4B,CAAC,EAAE,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC;gBAChF,OAAO;YACX,CAAC;YAED,OAAO,CAAC,OAAO,CAAC,YAAY,EAAE,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;QACtD,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,GAAG;YAChC,OAAO,CAAC,YAAY,GAAG,UAAU,CAAC,yBAAyB,CAAC,CAAC;YAC7D,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAC9B,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;QACzB,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG;YACzB,OAAO,CAAC,YAAY,GAAG,KAAK,CAAC;YAC7B,OAAO,CAAC,cAAc,GAAG,KAAK,CAAC;YAC/B,OAAO,CAAC,YAAY,GAAG,KAAK,CAAC;YAC7B,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAC/B,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,EAAE,CAAC;QAC3B,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG;YAC1B,OAAO,CAAC,YAAY,GAAG,KAAK,CAAC;YAC7B,OAAO,CAAC,cAAc,GAAG,KAAK,CAAC;YAC/B,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;YAC5B,OAAO,CAAC,UAAU,GAAG,KAAK,CAAC;YAC3B,OAAO,CAAC,eAAe,EAAE,CAAC;YAC1B,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC9B,CAAC,CAAC;QACF,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,GAAG;YAChC,EAAE,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,EAAE,CAAC;YAC3D,EAAE,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,EAAE,CAAC;YACzD,EAAE,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,EAAE,CAAC;QAC3D,CAAC,CAAC;IACN,CAAC;IAAA,CAAC;IACN,0BAAC;AAAD,CAAC,AAjgBD,CAAkC,eAAe,GAigBhD;AAAA,CAAC;AAEF;IAAsC,2CAAe;IAGjD,iCAAmB,IAAY;QAC3B,YAAA,MAAK,YAAC,IAAI,CAAC,SAAC;QAHN,YAAM,GAAW,GAAG,CAAC;;IAI/B,CAAC;IAAA,CAAC;IAEK,2CAAS,GAAhB;QACI,IAAI,IAAI,CAAC,MAAM,GAAG,GAAG,EAAE,CAAC;YACpB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;QACtB,CAAC;QACD,OAAO,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IAAA,CAAC;IACK,2CAAS,GAAhB,UAAiB,MAAc;QAC3B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACzB,CAAC;IAAA,CAAC;IACK,8CAAY,GAAnB;QACI,OAAO,iBAAiB,CAAC;IAC7B,CAAC;IAAA,CAAC;IACK,gDAAc,GAArB;QACI,IAAI,OAAO,GAAW,EAAE,CAAC;QACzB,OAAO,IAAI,8BAA8B,GAAG,uBAAuB,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,GAAG,+CAA+C,GAAG,IAAI,CAAC,SAAS,EAAE,GAAG,SAAS,GAAG,IAAI,CAAC;QAClL,OAAO,OAAO,CAAC;IACnB,CAAC;IAAA,CAAC;IACK,+CAAa,GAApB,UAAqB,MAAuB;QACxC,IAAI,MAAM,IAAI,IAAI;YAAE,OAAO,IAAI,CAAC;QAChC,IAAI,CAAC,CAAC,MAAM,YAAY,eAAe,CAAC;YAAE,OAAO,IAAI,CAAC;QAEtD,IAAI,MAAM,GAAG,gBAAK,CAAC,aAAa,YAAC,MAAM,CAAC,CAAC;QACzC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QACjC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAClC,OAAO,MAAM,CAAC;IAClB,CAAC;IAAA,CAAC;IACK,wDAAsB,GAA7B,UAA8B,OAA2B,EAAE,QAAgB;QACvE,IAAI,OAAO,IAAI,IAAI;YAAE,OAAO;QAC5B,IAAI,CAAC,CAAC,OAAO,YAAY,sBAAsB,CAAC;YAAE,OAAO;QACzD,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;IAC/B,CAAC;IAAA,CAAC;IACN,8BAAC;AAAD,CAAC,AAtCD,CAAsC,eAAe,GAsCpD;AAAA,CAAC;AAEF;IAAoC,yCAAW;IAG3C,+BAAmB,IAAY;QAC3B,YAAA,MAAK,YAAC,IAAI,CAAC,SAAC;QAHN,gBAAU,GAAW,CAAC,CAAC;QACvB,oBAAc,GAAW,IAAI,CAAC;;IAGxC,CAAC;IAAA,CAAC;IACK,4CAAY,GAAnB;QACI,OAAO,uBAAuB,CAAC;IACnC,CAAC;IAAA,CAAC;IACK,iDAAiB,GAAxB;QACI,OAAO,IAAI,CAAC;IAChB,CAAC;IAAA,CAAC;IACK,kDAAkB,GAAzB;QACI,OAAO,KAAK,CAAC;IACjB,CAAC;IAAA,CAAC;IACK,0DAA0B,GAAjC;QACI,OAAO,IAAI,CAAC;IAChB,CAAC;IAAA,CAAC;IACK,6CAAa,GAApB,UAAqB,IAAY,EAAE,MAAuB;QACtD,IAAI,MAAM,IAAI,IAAI;YAAE,OAAO;QAC3B,IAAI,CAAC,CAAC,MAAM,YAAY,eAAe,CAAC;YAAE,OAAO;QACjD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IAC3B,CAAC;IAAA,CAAC;IACK,iDAAiB,GAAxB,UAAyB,OAAe,EAAE,MAAuB;QAC7D,IAAI,MAAM,IAAI,IAAI;YAAE,OAAO;QAC3B,IAAI,CAAC,CAAC,MAAM,YAAY,eAAe,CAAC;YAAE,OAAO;QACjD,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC;IAClC,CAAC;IAAA,CAAC;IACK,yCAAS,GAAhB,UAAiB,MAAuB,EAAE,IAAmB,EAAE,IAAa,EAAE,OAAsB,EAAE,UAAkB;QACpH,IAAI,MAAM,IAAI,IAAI;YAAE,OAAO;QAC3B,IAAI,CAAC,CAAC,MAAM,YAAY,eAAe,CAAC;YAAE,OAAO;QACjD,IAAI,MAAM,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAAE,OAAO;QAG5E,IAAI,iBAAiB,GAAW,IAAI,CAAC,sBAAsB,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAC1E,IAAI,YAAY,GAAW,IAAI,CAAC,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC,CAAC;QAC9D,IAAI,YAAY,IAAI,CAAC;YAAE,YAAY,GAAG,CAAC,CAAC;QAIxC,IAAI,iBAAiB,GAAY,IAAI,CAAC;QACtC,IAAI,kBAAkB,GAAW,IAAI,CAAC;QACtC,IAAI,gBAAgB,GAAW,IAAI,CAAC;QAGpC,IAAI,eAAe,GAAG,IAAI,CAAC;QAuB3B,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,IAAI,IAAI,CAAC,cAAc,IAAI,EAAE,EAAE,CAAC;YAC3D,IAAI,SAAS,GAAQ,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAC/C,IAAI,SAAS,IAAI,IAAI,IAAI,OAAO,CAAC,SAAS,CAAC,IAAI,WAAW,EAAE,CAAC;gBACzD,eAAe,GAAG,IAAI,CAAC;YAC3B,CAAC;iBAAM,IAAI,SAAS,CAAC,SAAS,IAAI,IAAI,IAAI,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,WAAW,EAAE,CAAC;gBACpF,eAAe,GAAG,IAAI,CAAC;YAC3B,CAAC;iBAAM,CAAC;gBACJ,SAAS,GAAG,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,iBAAiB,CAAC,CAAC;gBAC1E,iBAAiB,GAAG,iBAAiB,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC;gBACnE,kBAAkB,GAAG,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;gBACpD,gBAAgB,GAAG,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;gBAEhD,eAAe,GAAG,KAAK,CAAC;YAC5B,CAAC;QACL,CAAC;QAED,IAAI,MAAM,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAAE,OAAO;QAE5E,IAAI,eAAe,EAAE,CAAC;YAElB,IAAI,gBAAgB,GAA2B,EAAE,CAAC;YAClD,IAAI,MAAM,GAAyB,IAAI,CAAC;YAExC,IAAI,UAAU,GAAW,CAAC,CAAC;YAC3B,IAAI,SAAS,GAAW,CAAC,CAAC;YAG1B,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC;gBAAE,SAAS,GAAG,CAAC,CAAC;YACxC,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC;gBAAE,SAAS,GAAG,CAAC,CAAC;YACxC,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC;gBAAE,SAAS,GAAG,CAAC,CAAC;YAGxC,MAAM,GAAG,IAAI,oBAAoB,EAAE,CAAC;YACpC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;YACnB,MAAM,CAAC,oBAAoB,GAAG,CAAC,CAAC,CAAC;YACjC,MAAM,CAAC,iBAAiB,GAAG,CAAC,CAAC;YAC7B,MAAM,CAAC,iBAAiB,GAAG,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC;YAC1C,IAAI,oBAAoB,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YACtD,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,CAAC,EAAE,CAAC;gBAChD,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;oBAC5C,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,WAAW,EAAE;wBAAE,SAAS;oBAC/D,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,oBAAoB,CAAC,GAAG,CAAC,EAAE,CAAC;wBACvE,MAAM,CAAC,iBAAiB,GAAG,MAAM,CAAC,iBAAiB,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC,CAAC;oBACpI,CAAC;oBACD,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE,CAAC;wBACxE,MAAM,CAAC,iBAAiB,GAAG,MAAM,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;oBACjF,CAAC;gBACL,CAAC;YACL,CAAC;YACD,MAAM,CAAC,iBAAiB,GAAG,MAAM,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;YACtF,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAE9B,IAAI,MAAM,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;gBAAE,OAAO;YAE5E,IAAI,YAAY,GAAG,oBAAoB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;YACvD,IAAI,QAAQ,GAAY,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC;YACvC,IAAI,SAAS,GAAW,CAAC,CAAC,CAAC;YAC3B,KAAK,IAAI,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,YAAY,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE,CAAC;gBACpD,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC;oBACzD,SAAS,GAAG,IAAI,CAAC;gBACrB,CAAC;gBACD,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC;YACtE,CAAC;YAED,IAAI,QAAQ,GAAY,QAAQ,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;YACrE,IAAI,SAAS,GAAY,YAAY,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YAC/D,IAAI,UAAU,GAAY,YAAY,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YACtF,IAAI,aAAa,GAAY,SAAS,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;YAG5D,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBACnD,IAAI,OAAO,GAAU,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;gBACzC,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;oBAC5C,IAAI,SAAS,GAAgB,OAAO,CAAC,GAAG,CAAC,CAAC;oBAC1C,IAAI,MAAM,GAAW,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;oBACrD,IAAI,MAAM,IAAI,IAAI;wBAAE,SAAS;oBAI7B,IAAI,cAAc,GAAW,CAAC,CAAC,CAAC;oBAChC,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,YAAY,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC;wBACvD,IAAI,YAAY,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,IAAI,SAAS,CAAC,WAAW,EAAE,EAAE,CAAC;4BAC/D,cAAc,GAAG,KAAK,CAAC;4BACvB,MAAM;wBACV,CAAC;oBACL,CAAC;oBAED,IAAI,WAAW,GAAY,IAAI,CAAC;oBAChC,IAAI,WAAW,GAAY,SAAS,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;oBAC3D,IAAI,cAAc,GAAY,SAAS,CAAC,qBAAqB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;oBAE7E,IAAI,SAAS,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC;wBAChD,WAAW,GAAG,cAAc,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;oBAClE,CAAC;yBAAM,CAAC;wBACJ,WAAW,GAAG,cAAc,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;wBAGzF,IAAI,WAAW,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE,CAAC;4BAC1C,IAAI,QAAQ,GAAW,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC;4BACvD,IAAI,SAAS,GAAG,cAAc,IAAI,IAAI,CAAC,GAAG,CAAC,cAAc,GAAG,SAAS,CAAC,IAAI,QAAQ,EAAE,CAAC;gCAGjF,WAAW,GAAG,WAAW,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;gCACnD,WAAW,GAAG,WAAW,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,cAAc,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gCAC1H,WAAW,GAAG,WAAW,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;gCAGjD,IAAI,QAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC;oCACpC,IAAI,kBAAkB,GAAY,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;oCACjE,IAAI,kBAAkB,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;wCACnF,WAAW,GAAG,WAAW,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;oCAChE,CAAC;gCACL,CAAC;4BACL,CAAC;wBACL,CAAC;oBACL,CAAC;oBAED,KAAK,IAAI,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE,CAAC;wBAC/C,IAAI,aAAa,GAAgB,OAAO,CAAC,IAAI,CAAC,CAAC;wBAC/C,IAAI,aAAa,CAAC,WAAW,EAAE,IAAI,SAAS,CAAC,WAAW,EAAE;4BAAE,SAAS;wBAErE,IAAI,aAAa,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC;4BACpD,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,aAAa,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC;wBACvE,CAAC;6BAAM,CAAC;4BACJ,WAAW,GAAG,WAAW,CAAC,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC;wBAC5E,CAAC;oBACL,CAAC;oBAED,MAAM,GAAG,IAAI,oBAAoB,EAAE,CAAC;oBACpC,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC;oBACtB,MAAM,CAAC,oBAAoB,GAAG,GAAG,CAAC;oBAClC,MAAM,CAAC,iBAAiB,GAAG,CAAC,CAAC;oBAC7B,KAAK,IAAI,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE,CAAC;wBAC/C,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC;4BACpD,MAAM,CAAC,iBAAiB,GAAG,IAAI,CAAC;4BAChC,MAAM;wBACV,CAAC;oBACL,CAAC;oBACD,MAAM,CAAC,iBAAiB,GAAG,WAAW,CAAC;oBACvC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBAE9B,IAAI,MAAM,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;wBAAE,OAAO;oBAC5E,IAAI,MAAM,CAAC,WAAW,EAAE,GAAG,YAAY;wBAAE,MAAM;gBACnD,CAAC;gBACD,IAAI,MAAM,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;oBAAE,OAAO;gBAC5E,IAAI,MAAM,CAAC,WAAW,EAAE,GAAG,YAAY;oBAAE,MAAM;YACnD,CAAC;YAGD,IAAI,cAAc,GAA2B,EAAE,CAAC;YAChD,IAAI,SAAS,GAAY,IAAI,OAAO,CAAC,iBAAiB,CAAC,CAAC;YACxD,IAAI,MAAM,GAAW,CAAC,CAAC,CAAC;YACxB,IAAI,cAAc,GAAW,CAAC,CAAC;YAC/B,OAAO,gBAAgB,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC;gBAClC,IAAI,gBAAgB,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC;oBAC/B,cAAc,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC;oBACzC,MAAM;gBACV,CAAC;qBAAM,CAAC;oBACJ,SAAS,GAAG,IAAI,OAAO,CAAC,iBAAiB,CAAC,CAAC;oBAC3C,MAAM,GAAG,CAAC,CAAC,CAAC;oBACZ,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,gBAAgB,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;wBACrD,IAAI,aAAa,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC;wBAC1C,IAAI,SAAS,CAAC,OAAO,CAAC,aAAa,CAAC,iBAAiB,CAAC,GAAG,CAAC,EAAE,CAAC;4BACzD,SAAS,GAAG,aAAa,CAAC,iBAAiB,CAAC;4BAC5C,MAAM,GAAG,GAAG,CAAC;wBACjB,CAAC;oBACL,CAAC;oBACD,cAAc,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC;oBAC9C,wBAAwB,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;gBACvD,CAAC;gBAED,IAAI,MAAM,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;oBAAE,OAAO;gBAE5E,cAAc,EAAE,CAAC;gBACjB,IAAI,cAAc,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC;oBAChE,UAAU,CAAC,wBAAwB,CAAC,CAAC;oBACrC,MAAM;gBACV,CAAC;YACL,CAAC;YAED,IAAI,MAAM,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;gBAAE,OAAO;YAG5E,IAAI,WAAW,GAAyB,IAAI,CAAC;YAC7C,IAAI,QAAQ,GAAW,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC;YACzD,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,EAAE,CAAC;gBACvB,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;YACpC,CAAC;iBAAM,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,EAAE,CAAC;gBAC9B,IAAI,QAAQ,IAAI,EAAE;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;qBAC/C,IAAI,cAAc,CAAC,MAAM,IAAI,CAAC;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;;oBAChE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;YACzC,CAAC;iBAAM,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,EAAE,CAAC;gBAC9B,IAAI,QAAQ,IAAI,EAAE;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;qBAC/C,IAAI,QAAQ,IAAI,EAAE,IAAI,cAAc,CAAC,MAAM,IAAI,CAAC;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;qBAClF,IAAI,cAAc,CAAC,MAAM,IAAI,CAAC;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;;oBAChE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;YACzC,CAAC;iBAAM,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,EAAE,CAAC;gBAC9B,IAAI,QAAQ,IAAI,EAAE;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;qBAC/C,IAAI,QAAQ,IAAI,EAAE,IAAI,cAAc,CAAC,MAAM,IAAI,CAAC;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;qBAClF,IAAI,QAAQ,IAAI,EAAE,IAAI,cAAc,CAAC,MAAM,IAAI,CAAC;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;qBAClF,IAAI,QAAQ,IAAI,CAAC,IAAI,cAAc,CAAC,MAAM,IAAI,CAAC;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;;oBACjF,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;YACzC,CAAC;iBAAM,CAAC;gBACJ,IAAI,QAAQ,IAAI,EAAE;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;qBAC/C,IAAI,QAAQ,IAAI,EAAE,IAAI,cAAc,CAAC,MAAM,IAAI,CAAC;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;qBAClF,IAAI,QAAQ,IAAI,EAAE,IAAI,cAAc,CAAC,MAAM,IAAI,CAAC;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;qBAClF,IAAI,QAAQ,IAAI,EAAE,IAAI,cAAc,CAAC,MAAM,IAAI,CAAC;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;qBAClF,IAAI,QAAQ,IAAI,CAAC,IAAI,cAAc,CAAC,MAAM,IAAI,CAAC;oBAAE,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;;oBACjF,WAAW,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;YACzC,CAAC;YAGD,IAAI,WAAW,IAAI,IAAI,IAAI,WAAW,CAAC,oBAAoB,GAAG,CAAC,EAAE,CAAC;gBAC9D,iBAAiB,GAAG,IAAI,CAAC;YAC7B,CAAC;iBAAM,CAAC;gBACJ,iBAAiB,GAAG,KAAK,CAAC;gBAC1B,kBAAkB,GAAG,OAAO,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC,WAAW,EAAE,CAAC;gBAC7E,gBAAgB,GAAG,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;YACtD,CAAC;QACL,CAAC;QAED,IAAI,MAAM,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAAE,OAAO;QAG5E,IAAI,iBAAiB,IAAI,kBAAkB,IAAI,IAAI,IAAI,gBAAgB,IAAI,IAAI,IAAI,kBAAkB,IAAI,EAAE,IAAI,gBAAgB,IAAI,EAAE,EAAE,CAAC;YACpI,MAAM,CAAC,aAAa,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACvD,OAAO;QACX,CAAC;QACD,IAAI,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,kBAAkB,EAAE,gBAAgB,CAAC,CAAC;QAClE,IAAI,MAAM,IAAI,IAAI,EAAE,CAAC;YACjB,MAAM,CAAC,aAAa,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACvD,OAAO;QACX,CAAC;IAEL,CAAC;IAAA,CAAC;IACK,8CAAc,GAArB;QACI,IAAI,OAAO,GAAW,EAAE,CAAC;QACzB,OAAO,IAAI,oCAAoC,CAAC;QAChD,OAAO,IAAI,4CAA4C,CAAC;QACxD,OAAO,IAAI,sBAAsB,GAAG,UAAU,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC;QAC1E,OAAO,IAAI,oCAAoC,CAAC;QAChD,OAAO,IAAI,oBAAoB,GAAG,uBAAuB,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,GAAG,WAAW,CAAC;QAC9F,OAAO,IAAI,WAAW,CAAC;QACvB,OAAO,IAAI,QAAQ,CAAC;QACpB,OAAO,IAAI,iDAAiD,CAAC;QAC7D,OAAO,IAAI,2DAA2D,GAAG,oBAAoB,CAAC,KAAK,GAAG,UAAU,CAAC,yCAAyC,CAAC,CAAC,GAAG,gBAAgB,CAAC;QAChL,OAAO,IAAI,QAAQ,CAAC;QACpB,OAAO,OAAO,CAAC;IACnB,CAAC;IAAA,CAAC;IACK,2CAAW,GAAlB,UAAmB,MAAuB;QACtC,IAAI,WAAW,GAAG,EAAE,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;QAClF,IAAI,SAAS,GAAG,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAClD,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QAClB,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI;YAAE,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IACxE,CAAC;IAAA,CAAC;IACK,2CAAW,GAAlB,UAAmB,MAAuB,EAAE,WAAoB,EAAE,cAAuB,EAAE,UAAmB;QAC1G,IAAI,WAAW;YAAE,OAAO;QACxB,IAAI,cAAc;YAAE,OAAO;QAC3B,IAAI,UAAU;YAAE,OAAO;QAEvB,IAAI,WAAW,GAAG,EAAE,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;QAClF,IAAI,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,GAAG,EAAE,CAAC;QACxD,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;QAEjC,IAAI,YAAY,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACnE,YAAY,GAAG,YAAY,CAAC,IAAI,EAAE,CAAC;QACnC,IAAI,YAAY,IAAI,EAAE,EAAE,CAAC;YACrB,IAAI,CAAC,cAAc,GAAG,YAAY,CAAC;QACvC,CAAC;IACL,CAAC;IAAA,CAAC;IACK,6CAAa,GAApB,UAAqB,MAAuB;QACxC,IAAI,MAAM,IAAI,IAAI;YAAE,OAAO,IAAI,CAAC;QAChC,IAAI,CAAC,CAAC,MAAM,YAAY,eAAe,CAAC;YAAE,OAAO,IAAI,CAAC;QAEtD,IAAI,MAAM,GAAG,gBAAK,CAAC,aAAa,YAAC,MAAM,CAAC,CAAC;QACzC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAClC,MAAM,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACpC,MAAM,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;QAC5C,OAAO,MAAM,CAAC;IAClB,CAAC;IAAA,CAAC;IACK,sDAAsB,GAA7B,UAA8B,OAA2B,EAAE,QAAgB;QACvE,IAAI,OAAO,IAAI,IAAI;YAAE,OAAO;QAC5B,IAAI,CAAC,CAAC,OAAO,YAAY,4BAA4B,CAAC;YAAE,OAAO;QAC/D,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;IAC/B,CAAC;IAAA,CAAC;IACN,4BAAC;AAAD,CAAC,AAjWD,CAAoC,WAAW,GAiW9C;AAAA,CAAC;AAEF;IAA6C,kDAAkB;IAA/D;;IAoCA,CAAC;IAnCU,oDAAW,GAAlB;QACI,OAAO,QAAQ,CAAC;IACpB,CAAC;IAAA,CAAC;IACK,+CAAM,GAAb,UAAc,IAAY;QACtB,OAAO,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;IACrC,CAAC;IAAA,CAAC;IACK,kEAAyB,GAAhC;QACI,OAAO,yBAAyB,CAAC;IACrC,CAAC;IAAA,CAAC;IACK,+DAAsB,GAA7B,UAA8B,GAAQ,EAAE,MAAuB;QAC3D,IAAI,MAAM,IAAI,IAAI;YAAE,OAAO,IAAI,CAAC;QAChC,IAAI,CAAC,CAAC,MAAM,YAAY,mBAAmB,CAAC;YAAE,OAAO,IAAI,CAAC;QAC1D,IAAI,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,yBAAyB,EAAE;YAAE,OAAO,IAAI,CAAC;QAC9D,IAAI,MAAM,GAA4B,IAAI,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAC5E,MAAM,CAAC,sBAAsB,CAAC,IAAI,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC;QAClD,IAAI,MAAM,GAAY,EAAE,CAAC;QACzB,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YAClD,IAAI,OAAO,GAAU,IAAI,KAAK,EAAE,CAAC;YACjC,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;YACnC,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;YACnC,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;YACzD,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACzB,CAAC;QACD,MAAM,CAAC,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACpC,IAAI,MAAM,GAAY,EAAE,CAAC;QACzB,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YAChD,IAAI,OAAO,GAAU,IAAI,KAAK,EAAE,CAAC;YACjC,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;YACjC,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;YACjC,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;YACvD,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACzB,CAAC;QACD,MAAM,CAAC,UAAU,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QAClC,OAAO,MAAM,CAAC;IAClB,CAAC;IAAA,CAAC;IACN,qCAAC;AAAD,CAAC,AApCD,CAA6C,kBAAkB,GAoC9D;AAAA,CAAC;AAEF;IAA2C,gDAAkB;IAA7D;;IAsCA,CAAC;IArCU,kDAAW,GAAlB;QACI,OAAO,IAAI,CAAC;IAChB,CAAC;IAAA,CAAC;IACK,6CAAM,GAAb,UAAc,IAAY;QACtB,OAAO,IAAI,qBAAqB,CAAC,IAAI,CAAC,CAAC;IAC3C,CAAC;IAAA,CAAC;IACK,gEAAyB,GAAhC;QACI,OAAO,eAAe,CAAC;IAC3B,CAAC;IAAA,CAAC;IACK,6DAAsB,GAA7B,UAA8B,GAAQ,EAAE,MAAuB;QAC3D,IAAI,MAAM,IAAI,IAAI;YAAE,OAAO,IAAI,CAAC;QAChC,IAAI,CAAC,CAAC,MAAM,YAAY,mBAAmB,CAAC;YAAE,OAAO,IAAI,CAAC;QAC1D,IAAI,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,yBAAyB,EAAE;YAAE,OAAO,IAAI,CAAC;QAC9D,IAAI,MAAM,GAA0B,IAAI,qBAAqB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACxE,MAAM,CAAC,sBAAsB,CAAC,IAAI,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC;QAClD,IAAI,MAAM,GAAY,EAAE,CAAC;QACzB,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YAClD,IAAI,OAAO,GAAU,IAAI,KAAK,EAAE,CAAC;YACjC,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;YACnC,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;YACnC,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;YACzD,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACzB,CAAC;QACD,MAAM,CAAC,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACpC,IAAI,MAAM,GAAY,EAAE,CAAC;QACzB,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YAChD,IAAI,OAAO,GAAU,IAAI,KAAK,EAAE,CAAC;YACjC,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;YACjC,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;YACjC,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;YACvD,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACzB,CAAC;QACD,MAAM,CAAC,UAAU,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QAClC,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;QAC7C,MAAM,CAAC,iBAAiB,CAAC,GAAG,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;QACrD,OAAO,MAAM,CAAC;IAClB,CAAC;IAAA,CAAC;IACN,mCAAC;AAAD,CAAC,AAtCD,CAA2C,kBAAkB,GAsC5D;AAAA,CAAC","sourcesContent":["\r\n/*\r\nThis JS library is made by HJOW.\r\nE-mail : hujinone22@naver.com\r\n\r\nThis library need following libraries : jQuery, jQuery UI, BigInteger.js, hjow_common, xcalc core.\r\nThis library is coded as TypeScript. If this file's extension is 'js', please find 'ts' original file.\r\n\r\njQuery : https://jquery.com/\r\njQuery UI : https://jqueryui.com/\r\nBigInteger.js : https://www.npmjs.com/package/big-integer?activeTab=readme\r\n*/\r\n/*\r\nCopyright 2019 HJOW (hujinone22@naver.com)\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n*/\r\nclass XCalcUserPlayEngine extends XCalcGameEngine {\r\n    protected userplayUsers: XCalcUserplayUserPlayer[] = [];\r\n    protected userplaySelectedIndex: number = 0;\r\n    public constructor(plcArea: string = '.hjow_xcalc_style_place', additionalRefreshFunction: Function = null, debugMode: boolean = false) {\r\n        super(plcArea, additionalRefreshFunction, debugMode);\r\n    };\r\n    public getClassName(): string {\r\n        return \"XCalcUserPlayEngine\";\r\n    };\r\n    protected prepareFirstProp() {\r\n        this.deck = [];\r\n        this.players = [];\r\n\r\n        var userplayCreator: XCalcPlayerCreator = new XCalcUserplayUserPlayerCreator();\r\n\r\n        this.playerTypes = [];\r\n        this.playerTypes.push(userplayCreator);\r\n        this.playerTypes.push(new XCalcUserplayAIPlayerCreator());\r\n\r\n        var userplayPlayerJson: string = this.properties.get(\"userplay_player\");\r\n        if (userplayPlayerJson == null) {\r\n            this.userplayUsers.push(new XCalcUserplayUserPlayer(hjow_trans(\"User\")));\r\n            this.userplaySelectedIndex = 0;\r\n        } else {\r\n            var userplayPlayerObj: object = JSON.parse(userplayPlayerJson);\r\n            var userplayPlayerArr: object[] = userplayPlayerObj['players'];\r\n            if (userplayPlayerArr == null || typeof (userplayPlayerArr) == 'undefined') userplayPlayerArr = [];\r\n            for (var idx = 0; idx < userplayPlayerArr.length; idx++) {\r\n                var playerOne = (userplayCreator.restoreFromPlainObject(userplayPlayerArr[idx], this)) as XCalcUserplayUserPlayer;\r\n                if (playerOne == null) continue;\r\n                this.userplayUsers.push(playerOne);\r\n            }\r\n\r\n            if (this.userplayUsers.length <= 0) {\r\n                this.userplayUsers.push(new XCalcUserplayUserPlayer(hjow_trans(\"User\")));\r\n                this.userplaySelectedIndex = 0;\r\n            } else {\r\n                var selectedNumObj = userplayPlayerObj['selected'];\r\n                if (selectedNumObj == null || typeof (selectedNumObj) == 'undefined') selectedNumObj = 1;\r\n                var selectedNum: number = parseInt(String(selectedNumObj));\r\n                this.userplaySelectedIndex = selectedNum;\r\n            }\r\n        }\r\n\r\n        this.players.push(this.userplayUsers[this.userplaySelectedIndex]);\r\n        this.players.push(new XCalcUserplayAIPlayer(\"AI \" + this.players.length));\r\n        this.players.push(new XCalcUserplayAIPlayer(\"AI \" + this.players.length));\r\n        this.players.push(new XCalcUserplayAIPlayer(\"AI \" + this.players.length));\r\n\r\n        this.gameModeList.push(new XCalcGameDefaultMode());\r\n        this.gameModeList.push(new XCalcGameSpeedMode());\r\n\r\n        var selfObj = this;\r\n        if (hjow_xcalc_addGameMode != null) {\r\n            hjow_xcalc_addGameMode = function (gameMode) {\r\n                selfObj.gameModeList.push(gameMode);\r\n                selfObj.refreshPage();\r\n            };\r\n            hjow_xcalc_addPlayerType = function (playerType) {\r\n                selfObj.playerTypes.push(playerType);\r\n                selfObj.refreshPage();\r\n            };\r\n        }\r\n\r\n        var useBrowserSelectOpt = this.getProperty('use_browser_select');\r\n        var useBrowserInputOpt = this.getProperty('use_browser_input');\r\n        var screenApplySpeed = this.getProperty('screen_apply_speed');\r\n        if (useBrowserSelectOpt == null || typeof (useBrowserSelectOpt) == 'undefined' || useBrowserSelectOpt == '') {\r\n            if (hjow_getPlatform() == 'android' || hjow_getPlatform() == 'windowsuniversal') {\r\n                useBrowserSelectOpt = \"false\";\r\n            } else {\r\n                useBrowserSelectOpt = \"true\";\r\n            }\r\n            this.setProperty('use_browser_select', useBrowserSelectOpt);\r\n        }\r\n\r\n        if (useBrowserInputOpt == null || typeof (useBrowserInputOpt) == 'undefined' || useBrowserInputOpt == '') {\r\n            if (hjow_getPlatform() == 'android') {\r\n                useBrowserInputOpt = \"false\";\r\n            } else {\r\n                useBrowserInputOpt = \"true\";\r\n            }\r\n            this.setProperty('use_browser_input', useBrowserInputOpt);\r\n        }\r\n\r\n        if (screenApplySpeed == null || typeof (screenApplySpeed) == 'undefined' || screenApplySpeed == '') {\r\n            screenApplySpeed = \"300\";\r\n            if (hjow_parseBoolean(useBrowserSelectOpt)) screenApplySpeed = \"100\";\r\n            this.setProperty('screen_apply_speed', screenApplySpeed);\r\n        }\r\n    };\r\n    protected saveUserplayPlayer() {\r\n        var userplayPlayerArr: object[] = [];\r\n        for (var idx = 0; idx < this.userplayUsers.length; idx++) {\r\n            userplayPlayerArr.push(this.userplayUsers[idx].toPlainObject(this));\r\n        }\r\n        var userplayPlayerObj = {};\r\n        userplayPlayerObj['players'] = userplayPlayerArr;\r\n        userplayPlayerObj['selected'] = this.userplaySelectedIndex;\r\n        this.properties.set(\"userplay_player\", JSON.stringify(userplayPlayerObj));\r\n        this.save();\r\n    };\r\n    protected refreshMain() {\r\n        var userplayUserArea: any = jq(this.placeArea).find('.sel_userplay_userlist');\r\n        userplayUserArea.empty();\r\n        for (var idx = 0; idx < this.userplayUsers.length; idx++) {\r\n            if (idx == this.userplaySelectedIndex) {\r\n                userplayUserArea.append(\"<option value='\" + this.userplayUsers[idx].getUniqueId() + \"' selected='selected'>\" + this.userplayUsers[idx].getName() + \"</option>\");\r\n            } else {\r\n                userplayUserArea.append(\"<option value='\" + this.userplayUsers[idx].getUniqueId() + \"'>\" + this.userplayUsers[idx].getName() + \"</option>\");\r\n            }\r\n        }\r\n\r\n        jq(this.placeArea).find('.td_player_list').empty();\r\n        var results = \"\";\r\n        results += \"<div class='full player_list_div element e137'>\" + \"\\n\";\r\n        results += \"<table class='full player_list element e138'>\" + \"\\n\";\r\n        if (this.players.length <= 0) {\r\n            results += \"   <tr class='tr_player pbasic_none  element'>\" + \"\\n\";\r\n            results += \"       <td class='td_player_none element'>\" + \"\\n\";\r\n            results += \"          <span class='label element'>\" + hjow_serializeXMLString(hjow_trans(\"Please add player to play.\")) + \"</span>\" + \"\\n\";\r\n            results += \"       </td>\" + \"\\n\";\r\n            results += \"   </tr>\" + \"\\n\";\r\n        } else {\r\n            for (var idx: number = 0; idx < this.players.length; idx++) {\r\n                var currentPlayer: XCalcPlayer = this.players[idx];\r\n                results += \"   <tr class='tr_player element pbasic_\" + hjow_serializeString(currentPlayer.getUniqueId()) + \"'>\" + \"\\n\";\r\n                results += \"       <td class='td_player element'>\" + \"\\n\";\r\n                results += this.eachPlayerMainHTML(currentPlayer);\r\n                results += \"       </td>\" + \"\\n\";\r\n                results += \"   </tr>\" + \"\\n\";\r\n            }\r\n        }\r\n        \r\n        results += \"   <tr class='tr_player_empty element e144'>\" + \"\\n\";\r\n        results += \"      <td class='td_player_empty element e145'>\" + \"\\n\";\r\n        results += \"      </td>\" + \"\\n\";\r\n        results += \"   </tr>\" + \"\\n\";\r\n        results += \"</table>\" + \"\\n\";\r\n        results += \"</div>\" + \"\\n\";\r\n        jq(this.placeArea).find('.td_player_list').html(hjow_toStaticHTML(results));\r\n\r\n        if (this.players.length <= 0) {\r\n            var removeBtn = jq(this.placeArea).find('.btn_remove_player');\r\n            removeBtn.prop('disabled', true);\r\n            removeBtn.attr('disabled', 'disabled');\r\n            removeBtn.addClass('disabled');\r\n        }\r\n\r\n        var heightVal: number = jq(this.placeArea).height() - 20;\r\n        if (heightVal < 200) heightVal = 200;\r\n\r\n        this.initTheme(1, false);\r\n\r\n        jq(this.placeArea).find('.player_list_div').css('min-height', heightVal - 200 + 'px');\r\n        jq(this.placeArea).find('.player_list_div').css('max-height', heightVal - 100 + 'px');\r\n\r\n        var selGameMode = jq(this.placeArea).find('.sel_game_mode');\r\n        selGameMode.find('option').remove();\r\n        for (var mdx = 0; mdx < this.gameModeList.length; mdx++) {\r\n            selGameMode.append(hjow_toStaticHTML(\"<option value='\" + mdx + \"'>\" + hjow_serializeXMLString(hjow_trans(this.gameModeList[mdx].getName())) + \"</option>\"));\r\n        }\r\n        selGameMode.val(this.gameModeIndex);\r\n\r\n        this.refreshMainGameMode(true);\r\n\r\n        for (var idx: number = 0; idx < this.players.length; idx++) {\r\n            this.players[idx].refreshMain(this);\r\n        }\r\n    };\r\n    protected mainPageHTML(): string {\r\n        var results: string = \"\";\r\n        results += \"<table class='element e001 full layout'>\" + \"\\n\";\r\n        results += \"  <tr class='element e002'>\" + \"\\n\";\r\n        results += \"     <td class='element e003 td_game_title'>\" + \"\\n\";\r\n        results += \"        <h2 class='element e004'>\" + hjow_serializeXMLString(hjow_trans(\"X Card\")) + \"</h2>\" + \"\\n\";\r\n        results += \"     </td>\" + \"\\n\";\r\n        results += \"     <td class='element e003'>\" + \"\\n\";\r\n        results += \"        <select class='element sel_userplay_userlist'></select>\" + \"\\n\";\r\n        results += \"        <button type='button' class='element btn_add_userplay_player'>+</button>\" + \"\\n\";\r\n        results += \"        <button type='button' class='element btn_del_userplay_player'>-</button>\" + \"\\n\";\r\n        results += \"     </td>\" + \"\\n\";\r\n        results += \"  </tr>\" + \"\\n\";\r\n        results += \"  <tr class='element e005'>\" + \"\\n\";\r\n        results += \"     <td class='element e006 td_player_list' colspan='2'>\" + \"\\n\";\r\n\r\n        results += \"     </td>\" + \"\\n\";\r\n        results += \"  </tr>\" + \"\\n\";\r\n        results += \"  <tr class='element e006'>\" + \"\\n\";\r\n        results += \"     <td class='element e007 td_game_below td_game_start'>\" + \"\\n\";\r\n        results += \"        <select class='element e008 sel_game_mode'></select>\" + \"\\n\";\r\n        results += \"        <button type='button' class='element e009 btn_game_start'>\" + hjow_serializeXMLString(hjow_trans(\"Start Game\")) + \"</button>\" + \"\\n\";\r\n        results += \"        <div class='element e010 div_game_mode_desc'></div>\" + \"\\n\";\r\n        results += \"     </td>\" + \"\\n\";\r\n        results += \"     <td class='element e163 td_game_below td_game_ads' style='width: 250px;'>\" + \"\\n\";\r\n        results += \"     </td>\" + \"\\n\";\r\n        results += \"  </tr>\" + \"\\n\";\r\n        results += \"</table>\" + \"\\n\";\r\n        return results;\r\n    };\r\n    protected eachPlayerMainHTML(player: XCalcPlayer): string {\r\n        var results: string = \"\";\r\n        results += \"<table class='full player_each element e089'>\" + \"\\n\";\r\n        results += \"   <colgroup>\" + \"\\n\";\r\n        results += \"       <col class='player_info_basic_label element e090'/>\" + \"\\n\";\r\n        results += \"       <col class='player_info_basic element e091'/>\" + \"\\n\";\r\n        results += \"       <col />\" + \"\\n\";\r\n        results += \"   </colgroup>\" + \"\\n\";\r\n        results += \"   <tbody>\" + \"\\n\";\r\n        results += \"       <tr class='element e092'>\" + \"\\n\";\r\n        results += \"          <td class='element e093 player_info_basic_label'>\" + \"\\n\";\r\n        results += \"              <span class='label element e094'>\" + hjow_serializeXMLString(hjow_trans(\"Name\")) + \"</span>\" + \"\\n\";\r\n        results += \"          </td>\" + \"\\n\";\r\n        results += \"          <td class='element e095 player_info_basic'>\" + \"\\n\";\r\n        var playerNameFieldOpt: string = \"\";\r\n        if (!player.isNameEditable()) playerNameFieldOpt = \" disabled\";\r\n        results += \"             <input type='text' class='element e096 inp_pname need_custom_keyboard\" + playerNameFieldOpt + \"' name='pname_\" + hjow_serializeString(player.getUniqueId()) + \"' value='\" + hjow_serializeString(player.getName()) + \"'\" + playerNameFieldOpt + \"/>\" + \"\\n\";\r\n        results += \"          </td>\" + \"\\n\";\r\n        results += \"          <td rowspan='2' class='element e097'>\" + \"\\n\";\r\n        var customHtml = player.customMainHTML();\r\n        if (customHtml != null) results += customHtml;\r\n        results += \"          </td>\" + \"\\n\";\r\n        results += \"       </tr>\" + \"\\n\";\r\n        results += \"       <tr class='element e098'>\" + \"\\n\";\r\n        results += \"          <td class='player_info_basic_label element e099'>\" + \"\\n\";\r\n        results += \"              <span class='label element e100'>\" + hjow_serializeXMLString(hjow_trans(\"Type\")) + \"</span>\" + \"\\n\";\r\n        results += \"          </td>\" + \"\\n\";\r\n        results += \"          <td class='player_info_basic element e101'>\" + \"\\n\";\r\n        results += \"             <span class='player_type element e102'>\" + hjow_serializeXMLString(hjow_trans(player.getPlayerTypeName())) + \"</span>\" + \"\\n\";\r\n        results += \"          </td>\" + \"\\n\";\r\n        results += \"       </tr>\" + \"\\n\";\r\n        results += \"   </tbody>\" + \"\\n\";\r\n        results += \"</table>\" + \"\\n\";\r\n        return results;\r\n    };\r\n\r\n    protected applyInputs() {\r\n        if (this.gameStarted) return;\r\n        if (this.needHideScreen) return;\r\n        if (this.showResult) return;\r\n        if (jq(this.placeArea).find('.page_main').is(':empty')) return;\r\n\r\n        var selectedUserVal = jq(this.getPlaceArea()).find(\".sel_userplay_userlist\").val();\r\n        for (var idx = 0; idx < this.userplayUsers.length; idx++) {\r\n            var player = this.userplayUsers[idx];\r\n            if (player.getUniqueId() == selectedUserVal) {\r\n                this.userplaySelectedIndex = idx;\r\n            }\r\n        }\r\n\r\n        var selGameMode = jq(this.placeArea).find('.sel_game_mode');\r\n        var selectedGameModeVal = selGameMode.val();\r\n        if (selectedGameModeVal != null) { // 화면이 가려져 있으면 값을 못가져옴\r\n            this.gameModeIndex = parseInt(selectedGameModeVal);\r\n        }\r\n\r\n        for (var idx = 0; idx < this.players.length; idx++) {\r\n            var playerOne: XCalcPlayer = this.players[idx];\r\n            var playerBlock = jq(this.placeArea).find(\".pbasic_\" + hjow_serializeString(playerOne.getUniqueId()));\r\n            if (playerBlock.length == 0) continue;\r\n            playerOne.setName(playerBlock.find('.inp_pname').val(), this);\r\n            playerOne.applyInputs(this, this.gameStarted, this.needHideScreen, this.showResult);\r\n            if (playerOne instanceof XCalcUserplayUserPlayer) {\r\n                this.userplayUsers[this.userplaySelectedIndex] = playerOne;\r\n            }\r\n            this.saveUserplayPlayer();\r\n        }\r\n    };\r\n\r\n    protected refreshEvents() {\r\n        var selfObj = this;\r\n        var selfAny: any = this.getSelfObject();\r\n        var pageArea = jq(this.placeArea);\r\n\r\n        this.removeButtonEvent(pageArea.find('button'));\r\n        this.removeSelectEvent(pageArea.find('select'));\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_add_userplay_player'), function (compObj) {\r\n            selfAny.events.main.btn_add_userplay_player();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_del_userplay_player'), function (compObj) {\r\n            selfAny.events.main.btn_del_userplay_player();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_game_start'), function (compObj) {\r\n            selfAny.events.main.btn_game_start();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_add_player'), function (compObj) {\r\n            selfAny.events.main.btn_add_player();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_remove_player'), function (compObj) {\r\n            selfAny.events.main.btn_remove_player();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_go_setting'), function (compObj) {\r\n            selfAny.events.main.btn_go_settings();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_apply_setting'), function (compObj) {\r\n            selfAny.events.main.btn_save_settings();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_show_log'), function (compObj) {\r\n            hjow_openLogDialog();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_delete_log'), function (compObj) {\r\n            hjow_deleteLogDialog();\r\n        });\r\n\r\n        this.reAllocateSelectEvent(pageArea.find('.sel_userplay_userlist'), function (compObj) {\r\n            selfAny.events.main.sel_userplay_user_changed();\r\n        });\r\n\r\n        this.reAllocateSelectEvent(pageArea.find('.sel_game_mode'), function (compObj) {\r\n            selfAny.events.main.sel_mode_changed();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_get_from_deck'), function (compObj) {\r\n            selfAny.events.game.btn_get_from_deck();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_go_main'), function (compObj) {\r\n            selfAny.events.main.btn_go_main();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_hide_reveal'), function (compObj) {\r\n            selfAny.events.hide.reveal();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_pay_here'), function (compObj) {\r\n            selfAny.events.game.btn_pay_here(compObj.attr('data-unique-id'));\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_stop_game'), function (compObj) {\r\n            selfAny.events.game.btn_game_stop();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_end'), function (compObj) {\r\n            selfAny.events.result.title();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(pageArea.find('.btn_show_replay'), function (compObj) {\r\n            selfAny.events.result.show_replay();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(jq('.btn_show_how_to'), function (compObj) {\r\n            selfAny.showHowToPlayDialog();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(jq('.btn_console_run'), function (compObj) {\r\n            hjow_log(eval(jq(selfObj.placeArea).find('.tx_console_run').val()));\r\n            hjow_openLogDialog();\r\n        });\r\n\r\n        this.reAllocateButtonEvent(jq('.btn_exit'), function (compObj) {\r\n            hjow_tryExit();\r\n        });\r\n    };\r\n    protected prepareEvents() {\r\n        var selfObj: XCalcUserPlayEngine = this;\r\n        var selfAny: any = this.getSelfObject(); // 이렇게 안하면 타입스크립트 제한사항 때문에 메소드 부여가 안 됨\r\n        selfAny.events = {};\r\n        selfAny.events.main = {};\r\n        selfAny.events.main.btn_game_start = function () {\r\n            selfObj.startGame();\r\n        };\r\n        selfAny.events.main.btn_add_userplay_player = function () {\r\n            selfObj.userplayUsers.push(new XCalcUserplayUserPlayer(\"NEW PLAYER\"));\r\n            selfObj.refreshPage();\r\n        };\r\n        selfAny.events.main.btn_del_userplay_player = function () {\r\n            if (selfObj.userplayUsers.length <= 1) {\r\n                hjow_alert(hjow_trans(\"Cannot delete a player.\"), hjow_trans('Information'));\r\n                return;\r\n            }\r\n\r\n            hjow_removeItemFromArray(selfObj.userplayUsers, selfObj.userplaySelectedIndex);\r\n            selfObj.userplaySelectedIndex = 1;\r\n            selfObj.refreshPage();\r\n        };\r\n        selfAny.events.main.btn_add_player = function () {\r\n            var typeOf: string = jq(selfObj.getPlaceArea()).find('.sel_player_type').val();\r\n            var playerCreator: XCalcPlayerCreator = null;\r\n            for (var idx = 0; idx < selfObj.playerTypes.length; idx++) {\r\n                if (selfObj.playerTypes[idx].getTypeName() == typeOf) {\r\n                    playerCreator = selfObj.playerTypes[idx];\r\n                    break;\r\n                }\r\n            }\r\n            if (playerCreator == null) {\r\n                hjow_alert(hjow_trans(\"Please select correct player type.\"), hjow_trans('Information'));\r\n                return;\r\n            }\r\n\r\n            var newPlayer: XCalcPlayer = playerCreator.create(playerCreator.getTypeName() + \" \" + selfObj.players.length);\r\n            selfObj.players.push(newPlayer);\r\n            selfObj.beforeSelectedPlayerType = playerCreator.getTypeName();\r\n            selfObj.refreshPage(false);\r\n        };\r\n        selfAny.events.main.btn_remove_player = function () {\r\n            if (selfObj.players.length == 0) return;\r\n            selfObj.players[selfObj.players.length - 1].resetCards();\r\n            hjow_removeItemFromArray(selfObj.players, selfObj.players.length - 1);\r\n            selfObj.refreshPage(false);\r\n        };\r\n        selfAny.events.main.btn_go_settings = function () {\r\n            selfObj.showSettings = true;\r\n            if (!selfObj.isDebugMode()) {\r\n                selfObj.needHideScreen = false;\r\n                selfObj.showResult = false;\r\n            }\r\n            selfObj.refreshPage();\r\n        };\r\n        selfAny.events.main.btn_go_main = function () {\r\n            selfObj.showSettings = false;\r\n            if (!selfObj.isDebugMode()) {\r\n                selfObj.showResult = false;\r\n                selfObj.needHideScreen = false;\r\n                selfObj.gameStarted = false;\r\n            }\r\n            selfObj.refreshPage();\r\n        };\r\n        selfAny.events.main.btn_save_settings = function () {\r\n            if (!hjow_parseBoolean(selfObj.getProperty('localStorageAvailable'))) {\r\n                hjow_alert(hjow_trans('On this platform, local storage saving is not working. Changes will be applied only this time.'));\r\n            }\r\n\r\n            selfObj.applySettings();\r\n            if (selfObj.isDebugMode()) {\r\n                selfObj.showSettings = false;\r\n                selfObj.refreshPage();\r\n            } else {\r\n                selfAny.events.main.btn_go_main();\r\n            }\r\n            selfObj.applyProperties();\r\n        };\r\n        selfAny.events.main.sel_userplay_user_changed = function () {\r\n            selfObj.applyInputs();\r\n        };\r\n        selfAny.events.main.sel_mode_changed = function () {\r\n            selfObj.applyInputs();\r\n            selfObj.refreshMainGameMode();\r\n        };\r\n        selfAny.events.game = {};\r\n        selfAny.events.game.btn_get_from_deck = function () {\r\n            var player: XCalcPlayer = selfObj.players[selfObj.turnPlayerIndex];\r\n            var card: XCalc = selfObj.deck[0];\r\n            hjow_removeItemFromArray(selfObj.deck, 0);\r\n            player.addOneOnInventory(card, selfObj);\r\n\r\n            if (selfObj.replay != null) {\r\n                try {\r\n                    var action = new XCalcReplayAction();\r\n                    action.card = null;\r\n                    action.actionPlayerIndex = selfObj.turnPlayerIndex;\r\n                    action.payTargetPlayerIndex = -1;\r\n                    action.date = new Date();\r\n                    selfObj.replay.actions.push(action);\r\n                } catch (e) {\r\n                    hjow_error(e);\r\n                    selfObj.replay = null;\r\n                }\r\n            }\r\n\r\n            hjow_log(\"TURN [\" + player.getName() + \"] : \" + hjow_trans(\"Get one card from deck.\"));\r\n            selfObj.nextTurn();\r\n        };\r\n        selfAny.events.game.btn_pay_here = function (playerUniqId: string) {\r\n            var player: XCalcPlayer = selfObj.players[selfObj.turnPlayerIndex]; // 현재 턴의 플레이어\r\n\r\n            var playerInvenObj = jq(selfObj.getPlaceArea()).find(\".pplace_\" + hjow_serializeString(player.getUniqueId()) + \" .inventory\");\r\n            var selectedCardVal = playerInvenObj.val(); // 배열\r\n            if (selectedCardVal.length <= 0) {\r\n                hjow_alert(hjow_trans(\"Please select your card first.\"), hjow_trans('Information'));\r\n                return;\r\n            }\r\n            if (selectedCardVal.length > 1) {\r\n                hjow_alert(hjow_trans(\"Cannot pay multiple cards.\"), hjow_trans('Information'));\r\n                return;\r\n            }\r\n\r\n            selfObj.payHere(playerUniqId, selectedCardVal[0]);\r\n        };\r\n        selfAny.events.game.btn_game_stop = function () {\r\n            selfObj.resultReason = hjow_trans('The user stop the game.');\r\n            selfObj.finishGame(false);\r\n        };\r\n        selfAny.events.hide = {};\r\n        selfAny.events.hide.reveal = function () {\r\n            selfObj.showSettings = false;\r\n            selfObj.needHideScreen = false;\r\n            selfObj.turnChanging = false;\r\n            selfObj.refreshPage(false);\r\n        };\r\n        selfAny.events.result = {};\r\n        selfAny.events.result.title = function () {\r\n            selfObj.showSettings = false;\r\n            selfObj.needHideScreen = false;\r\n            selfObj.gameStarted = false;\r\n            selfObj.showResult = false;\r\n            selfObj.clearAllPlayers();\r\n            selfObj.refreshPage(true);\r\n        };\r\n        selfAny.events.result.show_replay = function () {\r\n            jq(selfObj.getPlaceArea()).find('.btn_show_replay').hide();\r\n            jq(selfObj.getPlaceArea()).find('.replay_result').show();\r\n            jq(selfObj.getPlaceArea()).find('.replay_json').show();\r\n        };\r\n    };\r\n};\r\n\r\nclass XCalcUserplayUserPlayer extends XCalcUserPlayer {\r\n    protected credit: number = 100;\r\n\r\n    public constructor(name: string) {\r\n        super(name);\r\n    };\r\n    \r\n    public getCredit(): number {\r\n        if (this.credit < 100) {\r\n            this.credit = 100;\r\n        }\r\n        return this.credit;\r\n    };\r\n    public setCredit(credit: number) {\r\n        this.credit = credit;\r\n    };\r\n    public getClassName(): string {\r\n        return \"XCalcUserPlayer\";\r\n    };\r\n    public customMainHTML(): string {\r\n        var results: string = \"\";\r\n        results += \"<span class='label element'>\" + hjow_serializeXMLString(hjow_trans(\"Credit\")) + \"</span> : <span class='label element credit'>\" + this.getCredit() + \"</span>\" + \"\\n\";\r\n        return results;\r\n    };\r\n    public toPlainObject(engine: XCalcGameEngine): any {\r\n        if (engine == null) return null;\r\n        if (!(engine instanceof XCalcGameEngine)) return null;\r\n\r\n        var result = super.toPlainObject(engine);\r\n        result.credit = this.getCredit();\r\n        result.type = this.getClassName();\r\n        return result;\r\n    };\r\n    public setUniqueIdFromCreator(creator: XCalcPlayerCreator, uniqueId: string) {\r\n        if (creator == null) return;\r\n        if (!(creator instanceof XCalcUserPlayerCreator)) return;\r\n        this.setUniqueId(uniqueId);\r\n    };\r\n};\r\n\r\nclass XCalcUserplayAIPlayer extends XCalcPlayer {\r\n    protected difficulty: number = 2;\r\n    protected customAIScript: string = null;\r\n    public constructor(name: string) {\r\n        super(name);\r\n    };\r\n    public getClassName(): string {\r\n        return \"XCalcUserplayAIPlayer\";\r\n    };\r\n    public getPlayerTypeName(): string {\r\n        return \"AI\";\r\n    };\r\n    public isUserControllable(): boolean { // 사용자가 컨트롤 불가능\r\n        return false;\r\n    };\r\n    public needToHideInventoryForSelf(): boolean { // AI인 경우, 자기 자신 차례일 때도 인벤토리가 보이면 안 됨\r\n        return true;\r\n    };\r\n    public setDifficulty(diff: number, engine: XCalcGameEngine) {\r\n        if (engine == null) return;\r\n        if (!(engine instanceof XCalcGameEngine)) return;\r\n        this.difficulty = diff;\r\n    };\r\n    public setCustomAIScript(scripts: string, engine: XCalcGameEngine) {\r\n        if (engine == null) return;\r\n        if (!(engine instanceof XCalcGameEngine)) return;\r\n        this.customAIScript = scripts;\r\n    };\r\n    public actOnTurn(engine: XCalcGameEngine, mode: XCalcGameMode, deck: XCalc[], players: XCalcPlayer[], turnNumber: number) {\r\n        if (engine == null) return;\r\n        if (!(engine instanceof XCalcGameEngine)) return;\r\n        if (engine.isActPlayerStopRequested() || (!engine.isThisTurn(this))) return;\r\n\r\n        // 플레이어에게 주어지는 시간 (남은 시간과 1초정도 다를 수 있음)\r\n        var currentPlayerTime: number = mode.getEachPlayerTimeLimit(this, engine);\r\n        var timeLimitStd: number = Math.ceil(currentPlayerTime / 5.0);\r\n        if (timeLimitStd <= 2) timeLimitStd = 2;\r\n\r\n        /////// AI 인공지능 처리 시작 ///////\r\n        // 결과 변수 준비\r\n        var needToGetFromDeck: boolean = true;\r\n        var targetPlayerUniqId: string = null;\r\n        var targetCardUniqId: string = null;\r\n\r\n        // 최적의 수 계산\r\n        var needDefaultCalc = true;\r\n\r\n        /***********************************************\r\n        // customAIScript 안에 들어갈 문자열 내용 샘플\r\n        var aiProcessFunction = function(engine, deck, players, currentPlayerTime) { // deck 은 덱에 있는 카드 객체들의 배열, players 는 플레이어 객체들의 배열 (객체 안에서 필요한 데이터와 고유값에 액세스하면 됨), currentPlayerTime 는 플레이어의 제한 시간\r\n            var getDeck = true;              // 덱에서 카드를 받아야 할 때 true 지정 (다른 플레이어에게 카드를 놓아야 할 때는 반드시 false 로 지정할 것)\r\n            var targetPlayerUniqueId = null; // 카드를 다른 플레이어에게 놓아야 할 때, 대상 플레이어의 고유값 지정\r\n            var targetCardUniqueId   = null; // 카드를 다른 플레이어에게 놓아야 할 때, 대상 카드의 고유값 지정\r\n\r\n            // 이 곳에서 연산 작업 수행\r\n            \r\n            return {\r\n                needToGetFromDeck: getDeck         // needToGetFromDeck 이름은 반드시 지켜야 호환됨\r\n              , targetPlayer: targetPlayerUniqueId // targetPlayer 이름은 반드시 지켜야 호환됨\r\n              , targetCard: targetCardUniqueId     // targetCard 이름은 반드시 지켜야 호환됨\r\n            };\r\n        };\r\n        var returnObject = {\r\n            aiProcess: aiProcessFunction // aiProcess 이름은 반드시 지켜야 호환됨\r\n        };\r\n        // eval 처리 결과로 리턴 처리를 위해 만들어둔 변수명을 적어 마무리\r\n        returnObject\r\n        ***********************************************/\r\n        if (this.customAIScript != null && this.customAIScript != '') { // 커스텀 AI 스크립트 여부 확인해 처리\r\n            var resultObj: any = eval(this.customAIScript);\r\n            if (resultObj == null || typeof (resultObj) == 'undefined') {\r\n                needDefaultCalc = true;\r\n            } else if (resultObj.aiProcess == null || typeof (resultObj.aiProcess) == 'undefined') {\r\n                needDefaultCalc = true;\r\n            } else {\r\n                resultObj = resultObj.aiProcess(engine, deck, players, currentPlayerTime);\r\n                needToGetFromDeck = hjow_parseBoolean(resultObj.needToGetFromDeck);\r\n                targetPlayerUniqId = String(resultObj.targetPlayer);\r\n                targetCardUniqId = String(resultObj.targetCard);\r\n\r\n                needDefaultCalc = false;\r\n            }\r\n        }\r\n\r\n        if (engine.isActPlayerStopRequested() || (!engine.isThisTurn(this))) return; // 시간 제한이 지났는지 확인 (지났으면 연산 중단)\r\n\r\n        if (needDefaultCalc) { // 기본 제공 인공지능 처리 로직\r\n            // 사용 가능한 동작들을 다 배열에 넣어서 각각 수행 결과 이득 정도를 점수를 매겨 그중 높은 점수를 선택하도록 함 (난이도가 낮으면 랜덤하게 일정 확률로 덜 높은 점수의 동작을 선택하면 됨)\r\n            var availableActions: XCalcAIProcessAction[] = [];\r\n            var oneAct: XCalcAIProcessAction = null;\r\n\r\n            var offensives: number = 1; // 공격 행동 비율점수\r\n            var defendees: number = 1;  // 방어 행동 비율점수\r\n\r\n            // 난이도에 따라 인공지능을 좀 더 방어적으로 행동하도록 함\r\n            if (this.difficulty == 2) defendees = 2;\r\n            if (this.difficulty == 1) defendees = 4;\r\n            if (this.difficulty == 0) defendees = 8;\r\n\r\n            // 덱에서 카드를 받는 동작은 항상 사용가능 (단, 지금 다른 플레이어에 비해 불리한 상황이면서 덱에 남은 카드 수가 적으면, 점수를 낮게 책정함) --> 동작 수는 항상 1 이상\r\n            oneAct = new XCalcAIProcessAction();\r\n            oneAct.card = null;\r\n            oneAct.payTargetPlayerIndex = -1; // 덱에서 카드 받을 때는 -1\r\n            oneAct.actionPlayerIndex = 0;\r\n            oneAct.calculatedAIPoint = new TBigInt(0);\r\n            var currentThisUserPoint = this.getCurrentPoint(mode);\r\n            if (deck.length < Math.ceil(players.length / 2.0)) { // 덱에 있는 카드 수가 매우 적으면 (플레이어 많으면 기준치를 적정량 늘려야 함)\r\n                for (var idx = 0; idx < players.length; idx++) {\r\n                    if (players[idx].getUniqueId() == this.getUniqueId()) continue;\r\n                    if (players[idx].getCurrentPoint(mode).compare(currentThisUserPoint) > 0) { // 다른 플레이어가 지금 이 플레이어보다 점수가 높음\r\n                        oneAct.calculatedAIPoint = oneAct.calculatedAIPoint.subtract(players[idx].getCurrentPoint(mode).subtract(currentThisUserPoint)); // 다른 플레이어와 이 플레이어의 점수 차만큼 점수 제거\r\n                    }\r\n                    if (players[idx].getCurrentPoint(mode).compare(currentThisUserPoint) == 0) { // 다른 플레이어가 지금 이 플레이어와 점수가 동일\r\n                        oneAct.calculatedAIPoint = oneAct.calculatedAIPoint.subtract(new TBigInt(1)); // 1점\r\n                    }\r\n                }\r\n            }\r\n            oneAct.calculatedAIPoint = oneAct.calculatedAIPoint.subtract(new TBigInt(offensives)); // 공격 행동 비율점수만큼 뺄셈\r\n            availableActions.push(oneAct);\r\n\r\n            if (engine.isActPlayerStopRequested() || (!engine.isThisTurn(this))) return; // 시간 제한이 지났는지 확인 (지났으면 연산 중단)\r\n\r\n            var playerOrders = hjow_orderPlayerList(players, mode); // 점수 순위로 플레이어 순서 정렬한 배열 미리 준비 (점수가 너무 낮은 플레이어에게 공격하는 것을 방지하기 위함)\r\n            var sumPoint: TBigInt = new TBigInt(0); // 전체 플레이어의 점수도 계산할 예정\r\n            var selfOrder: number = -1; // 자기자신의 순위 계산\r\n            for (var podx = 0; podx < playerOrders.length; podx++) {\r\n                if (playerOrders[podx].getUniqueId() == this.getUniqueId()) {\r\n                    selfOrder = podx;\r\n                }\r\n                sumPoint = sumPoint.add(playerOrders[podx].getCurrentPoint(mode));\r\n            }\r\n\r\n            var avgPoint: TBigInt = sumPoint.divide(new TBigInt(players.length)); // 평균 점수\r\n            var bestPoint: TBigInt = playerOrders[0].getCurrentPoint(mode); // 1등의 현 점수\r\n            var worstPoint: TBigInt = playerOrders[playerOrders.length - 1].getCurrentPoint(mode); // 꼴찌의 점수\r\n            var variancePoint: TBigInt = bestPoint.subtract(worstPoint); // 1등과 꼴찌 점수 차이\r\n\r\n            // 다른 플레이어에게 카드를 줄 수 있는 모든 경우의 수 찾기\r\n            for (var cdx = 0; cdx < this.inventory.length; cdx++) {\r\n                var invCard: XCalc = this.inventory[cdx];\r\n                for (var pdx = 0; pdx < players.length; pdx++) {\r\n                    var playerOne: XCalcPlayer = players[pdx];\r\n                    var errMsg: string = playerOne.canPay(invCard, this);\r\n                    if (errMsg != null) continue; // 카드 내기가 불가능 - 사용 가능 동작에 등록하지 않음\r\n\r\n                    // 사용 가능 동작임이 확인됨, 동작 점수 계산\r\n\r\n                    var playerOneOrder: number = -1; // 이 대상 플레이어의 순위 계산\r\n                    for (var podx2 = 0; podx2 < playerOrders.length; podx2++) {\r\n                        if (playerOrders[podx2].getUniqueId() == playerOne.getUniqueId()) {\r\n                            playerOneOrder = podx2;\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    var actionPoint: TBigInt = null;\r\n                    var beforePoint: TBigInt = playerOne.getCurrentPoint(mode); // 이 대상 플레이어의 변화 전 점수\r\n                    var simulatedPoint: TBigInt = playerOne.getCurrentPointIfPaid(mode, invCard); // 이 대상 플레이어의 변화결과 점수\r\n\r\n                    if (playerOne.getUniqueId() == this.getUniqueId()) {\r\n                        actionPoint = simulatedPoint.multiply(new TBigInt(defendees)); // 자기자신에게 카드를 놓음 - 방어 비율 적용\r\n                    } else {\r\n                        actionPoint = simulatedPoint.multiply(new TBigInt(-1)).multiply(new TBigInt(offensives)); // 상대방에게 카드를 놓음 - 공격 비율 적용\r\n\r\n                        // 상대방 플레이어의 순위가 자신 대비 너무 낮은 경우 더 공격할 필요가 줄어듦 - 공격 확률 축소\r\n                        if (beforePoint.compare(simulatedPoint) > 0) { // 카드를 두면 상대의 점수가 더 적어지는 경우에만 이 기능 적용 (공격이 아닌, 어쩔 수 없이 손해를 보더라도 두는 경우는 이 기능 적용 안 하기 위함)\r\n                            var orderStd: number = Math.ceil(players.length / 2.0); // 순위 차이가 어느정도 나야 많이 나는 것으로 인식해야 할 지를 적당히 계산함\r\n                            if (selfOrder < playerOneOrder && Math.abs(playerOneOrder - selfOrder) >= orderStd) { // 순위는 숫자가 낮을수록 좋음!! 위에서 계산한 기준치 적용\r\n\r\n                                // bigInt 는 정수만 지원하므로 나눗셈을 하면 나머지 부분이 날아감 (소수점 내림), 그러므로, 먼저 2배를 하고 나눗셈을 한 후 2를 다시 나누면 반올림 효과 비슷하게 동작함\r\n                                actionPoint = actionPoint.multiply(new TBigInt(2));\r\n                                actionPoint = actionPoint.divide(new TBigInt(Math.round(Math.abs(playerOneOrder - selfOrder))).multiply(new TBigInt(10))); // 순위 차이 만큼 나눔, 순위 차이가 클 수록 나누는 수가 커짐\r\n                                actionPoint = actionPoint.divide(new TBigInt(2));\r\n\r\n                                // 점수 차가 너무 벌어져 있다면 이것으로도 부족하므로 추가 작업\r\n                                if (avgPoint.compare(beforePoint) > 0) {\r\n                                    var targetPlayerGapAvg: TBigInt = avgPoint.subtract(beforePoint); // 평균 점수에서 타겟 플레이어 점수를 뺌\r\n                                    if (targetPlayerGapAvg.abs().compare(variancePoint.abs().divide(new TBigInt(4))) > 0) {\r\n                                        actionPoint = actionPoint.subtract(new TBigInt(-999999999));\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    // 이 시점에서 actionPoint 는 null 이 아님\r\n                    for (var pdx2 = 0; pdx2 < players.length; pdx2++) {\r\n                        var playerAnother: XCalcPlayer = players[pdx2];\r\n                        if (playerAnother.getUniqueId() == playerOne.getUniqueId()) continue; // 이미 계산한 플레이어는 점수 계산에서 제외\r\n\r\n                        if (playerAnother.getUniqueId() == this.getUniqueId()) {\r\n                            actionPoint = actionPoint.add(playerAnother.getCurrentPoint(mode));\r\n                        } else {\r\n                            actionPoint = actionPoint.subtract(playerAnother.getCurrentPoint(mode));\r\n                        }\r\n                    }\r\n\r\n                    oneAct = new XCalcAIProcessAction();\r\n                    oneAct.card = invCard;\r\n                    oneAct.payTargetPlayerIndex = pdx;\r\n                    oneAct.actionPlayerIndex = 0;\r\n                    for (var pdx3 = 0; pdx3 < players.length; pdx3++) { // 자기자신의 인덱스를 알아내기 위함\r\n                        if (players[pdx3].getUniqueId() == this.getUniqueId()) {\r\n                            oneAct.actionPlayerIndex = pdx3;\r\n                            break;\r\n                        }\r\n                    }\r\n                    oneAct.calculatedAIPoint = actionPoint;\r\n                    availableActions.push(oneAct); // 동작에 추가\r\n\r\n                    if (engine.isActPlayerStopRequested() || (!engine.isThisTurn(this))) return; // 시간 제한이 지났는지 확인 (지났으면 연산 중단)\r\n                    if (engine.getLeftTime() < timeLimitStd) break; // 시간 제한이 지나지는 않았으나 얼마 안남았으면 반복처리 중단, 지금까지의 연산 결과만 반영\r\n                }\r\n                if (engine.isActPlayerStopRequested() || (!engine.isThisTurn(this))) return; // 시간 제한이 지났는지 확인 (지났으면 연산 중단)\r\n                if (engine.getLeftTime() < timeLimitStd) break; // 시간 제한이 지나지는 않았으나 얼마 안남았으면 반복처리 중단, 지금까지의 연산 결과만 반영\r\n            }\r\n\r\n            // 동작들을 가지고 순서 매기기\r\n            var orderedActions: XCalcAIProcessAction[] = [];\r\n            var maxPoints: TBigInt = new TBigInt(\"-99999999999999\");\r\n            var maxIdx: number = -1;\r\n            var preventInfLoop: number = 0;\r\n            while (availableActions.length >= 1) {\r\n                if (availableActions.length == 1) {\r\n                    orderedActions.push(availableActions[0]);\r\n                    break;\r\n                } else {\r\n                    maxPoints = new TBigInt(\"-99999999999999\");\r\n                    maxIdx = -1;\r\n                    for (var bdx = 0; bdx < availableActions.length; bdx++) {\r\n                        var currentAction = availableActions[bdx];\r\n                        if (maxPoints.compare(currentAction.calculatedAIPoint) < 0) {\r\n                            maxPoints = currentAction.calculatedAIPoint;\r\n                            maxIdx = bdx;\r\n                        }\r\n                    }\r\n                    orderedActions.push(availableActions[maxIdx]);\r\n                    hjow_removeItemFromArray(availableActions, maxIdx);\r\n                }\r\n\r\n                if (engine.isActPlayerStopRequested() || (!engine.isThisTurn(this))) return; // 시간 제한이 지났는지 확인 (지났으면 연산 중단)\r\n\r\n                preventInfLoop++;\r\n                if (preventInfLoop >= 1000 * Math.max(availableActions.length, 1)) {\r\n                    hjow_error(\"Infinite Loop Detected\");\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (engine.isActPlayerStopRequested() || (!engine.isThisTurn(this))) return; // 시간 제한이 지났는지 확인 (지났으면 연산 중단)\r\n\r\n            // 동작들 중 실제 수행할 동작 선택\r\n            var selectedAct: XCalcAIProcessAction = null;\r\n            var randomNo: number = Math.round(Math.random() * 100.0);\r\n            if (this.difficulty >= 4) { // 미친 난이도\r\n                selectedAct = orderedActions[0]; // 그냥 가장 좋은 선택을 함\r\n            } else if (this.difficulty == 3) { // 극한\r\n                if (randomNo >= 10) selectedAct = orderedActions[0]; // 그냥 가장 좋은 선택을 함\r\n                else if (orderedActions.length >= 2) selectedAct = orderedActions[1]; // 차선\r\n                else selectedAct = orderedActions[0]; // 그냥 가장 좋은 선택을 함\r\n            } else if (this.difficulty == 2) { // 어려움\r\n                if (randomNo >= 50) selectedAct = orderedActions[0]; // 그냥 가장 좋은 선택을 함\r\n                else if (randomNo >= 10 && orderedActions.length >= 2) selectedAct = orderedActions[1]; // 차선\r\n                else if (orderedActions.length >= 3) selectedAct = orderedActions[2]; // 차차선\r\n                else selectedAct = orderedActions[0]; // 그냥 가장 좋은 선택을 함\r\n            } else if (this.difficulty == 1) { // 보통\r\n                if (randomNo >= 65) selectedAct = orderedActions[0]; // 그냥 가장 좋은 선택을 함\r\n                else if (randomNo >= 30 && orderedActions.length >= 2) selectedAct = orderedActions[1]; // 차선\r\n                else if (randomNo >= 10 && orderedActions.length >= 3) selectedAct = orderedActions[2]; // 차차선\r\n                else if (randomNo >= 5 && orderedActions.length >= 4) selectedAct = orderedActions[3]; // 차차차선\r\n                else selectedAct = orderedActions[0]; // 그냥 가장 좋은 선택을 함\r\n            } else { // 쉬움\r\n                if (randomNo >= 70) selectedAct = orderedActions[0]; // 그냥 가장 좋은 선택을 함\r\n                else if (randomNo >= 60 && orderedActions.length >= 2) selectedAct = orderedActions[1]; // 차선\r\n                else if (randomNo >= 50 && orderedActions.length >= 3) selectedAct = orderedActions[2]; // 차차선\r\n                else if (randomNo >= 20 && orderedActions.length >= 4) selectedAct = orderedActions[3]; // 차차차선\r\n                else if (randomNo >= 5 && orderedActions.length >= 5) selectedAct = orderedActions[4]; // 차차차차선\r\n                else selectedAct = orderedActions[0]; // 그냥 가장 좋은 선택을 함\r\n            }\r\n\r\n            // 동작 처리\r\n            if (selectedAct == null || selectedAct.payTargetPlayerIndex < 0) {\r\n                needToGetFromDeck = true;\r\n            } else {\r\n                needToGetFromDeck = false;\r\n                targetPlayerUniqId = players[selectedAct.payTargetPlayerIndex].getUniqueId();\r\n                targetCardUniqId = selectedAct.card.getUniqueId();\r\n            }\r\n        }\r\n\r\n        if (engine.isActPlayerStopRequested() || (!engine.isThisTurn(this))) return; // 시간 제한이 지났는지 확인 (지났으면 연산 중단)\r\n\r\n        // 계산 결과 집행\r\n        if (needToGetFromDeck || targetPlayerUniqId == null || targetCardUniqId == null || targetPlayerUniqId == '' || targetCardUniqId == '') {\r\n            engine.getSelfObject().events.game.btn_get_from_deck();\r\n            return;\r\n        }\r\n        var errMsg = engine.payHere(targetPlayerUniqId, targetCardUniqId);\r\n        if (errMsg != null) {\r\n            engine.getSelfObject().events.game.btn_get_from_deck();\r\n            return;\r\n        }\r\n\r\n    };\r\n    public customMainHTML(): string {\r\n        var results: string = \"\";\r\n        results += \"<div class='div_player_ai_custom'>\";\r\n        results += \"<div class='div_player_ai_custom_element'>\";\r\n        results += \"<span class='label'>\" + hjow_trans(\"Difficulty\") + \"</span> \";\r\n        results += \"<select class='sel_ai_difficulty'>\";\r\n        results += \"<option value='2'>\" + hjow_serializeXMLString(hjow_trans(\"Normal\")) + \"</option>\";\r\n        results += \"</select>\";\r\n        results += \"</div>\";\r\n        results += \"<div class='div_player_ai_custom_element wide'>\";\r\n        results += \"<textarea class='tx_ai_script advanceMode' placeholder=\\\"\" + hjow_serializeString(\"// \" + hjow_trans(\"paste custom AI script here if you want\")) + \"\\\"></textarea>\";\r\n        results += \"</div>\";\r\n        return results;\r\n    };\r\n    public refreshMain(engine: XCalcGameEngine) {\r\n        var playerBlock = jq(engine.getPlaceArea()).find(\".pbasic_\" + this.getUniqueId());\r\n        var textBlock = playerBlock.find('.tx_ai_script');\r\n        textBlock.val('');\r\n        if (this.customAIScript != null) textBlock.val(this.customAIScript);\r\n    };\r\n    public applyInputs(engine: XCalcGameEngine, gameStarted: boolean, needHideScreen: boolean, showResult: boolean) {\r\n        if (gameStarted) return;\r\n        if (needHideScreen) return;\r\n        if (showResult) return;\r\n\r\n        var playerBlock = jq(engine.getPlaceArea()).find(\".pbasic_\" + this.getUniqueId());\r\n        var diff = playerBlock.find('.sel_ai_difficulty').val();\r\n        this.difficulty = parseInt(diff);\r\n\r\n        var scriptInputs = String(playerBlock.find(\".tx_ai_script\").val());\r\n        scriptInputs = scriptInputs.trim();\r\n        if (scriptInputs != '') {\r\n            this.customAIScript = scriptInputs;\r\n        }\r\n    };\r\n    public toPlainObject(engine: XCalcGameEngine): any {\r\n        if (engine == null) return null;\r\n        if (!(engine instanceof XCalcGameEngine)) return null;\r\n\r\n        var result = super.toPlainObject(engine);\r\n        result.type = this.getClassName();\r\n        result.difficulty = this.difficulty;\r\n        result.customAIScript = this.customAIScript;\r\n        return result;\r\n    };\r\n    public setUniqueIdFromCreator(creator: XCalcPlayerCreator, uniqueId: string) {\r\n        if (creator == null) return;\r\n        if (!(creator instanceof XCalcUserplayAIPlayerCreator)) return;\r\n        this.setUniqueId(uniqueId);\r\n    };\r\n};\r\n\r\nclass XCalcUserplayUserPlayerCreator extends XCalcPlayerCreator {\r\n    public getTypeName() {\r\n        return \"Player\";\r\n    };\r\n    public create(name: string): XCalcPlayer {\r\n        return new XCalcUserPlayer(name);\r\n    };\r\n    public getSupportPlayerClassName() {\r\n        return \"XCalcUserplayUserPlayer\";\r\n    };\r\n    public restoreFromPlainObject(obj: any, engine: XCalcGameEngine): XCalcPlayer {\r\n        if (engine == null) return null;\r\n        if (!(engine instanceof XCalcUserPlayEngine)) return null;\r\n        if (obj.type != this.getSupportPlayerClassName()) return null;\r\n        var result: XCalcUserplayUserPlayer = new XCalcUserplayUserPlayer(obj.name);\r\n        result.setUniqueIdFromCreator(this, obj.uniqueId);\r\n        var invArr: XCalc[] = [];\r\n        for (var idx = 0; idx < obj.inventory.length; idx++) {\r\n            var newCard: XCalc = new XCalc();\r\n            newCard.no = obj.inventory[idx].no;\r\n            newCard.op = obj.inventory[idx].op;\r\n            newCard.setUniqueId(engine, obj.inventory[idx].uniqueId);\r\n            invArr.push(newCard);\r\n        }\r\n        result.setInventory(invArr, engine);\r\n        var appArr: XCalc[] = [];\r\n        for (var adx = 0; adx < obj.applied.length; adx++) {\r\n            var newCard: XCalc = new XCalc();\r\n            newCard.no = obj.applied[adx].no;\r\n            newCard.op = obj.applied[adx].op;\r\n            newCard.setUniqueId(engine, obj.applied[adx].uniqueId);\r\n            appArr.push(newCard);\r\n        }\r\n        result.setApplied(appArr, engine);\r\n        return result;\r\n    };\r\n};\r\n\r\nclass XCalcUserplayAIPlayerCreator extends XCalcPlayerCreator {\r\n    public getTypeName() {\r\n        return \"AI\";\r\n    };\r\n    public create(name: string): XCalcPlayer {\r\n        return new XCalcUserplayAIPlayer(name);\r\n    };\r\n    public getSupportPlayerClassName() {\r\n        return \"XCalcAIPlayer\";\r\n    };\r\n    public restoreFromPlainObject(obj: any, engine: XCalcGameEngine): XCalcPlayer {\r\n        if (engine == null) return null;\r\n        if (!(engine instanceof XCalcUserPlayEngine)) return null;\r\n        if (obj.type != this.getSupportPlayerClassName()) return null;\r\n        var result: XCalcUserplayAIPlayer = new XCalcUserplayAIPlayer(obj.name);\r\n        result.setUniqueIdFromCreator(this, obj.uniqueId);\r\n        var invArr: XCalc[] = [];\r\n        for (var idx = 0; idx < obj.inventory.length; idx++) {\r\n            var newCard: XCalc = new XCalc();\r\n            newCard.no = obj.inventory[idx].no;\r\n            newCard.op = obj.inventory[idx].op;\r\n            newCard.setUniqueId(engine, obj.inventory[idx].uniqueId);\r\n            invArr.push(newCard);\r\n        }\r\n        result.setInventory(invArr, engine);\r\n        var appArr: XCalc[] = [];\r\n        for (var adx = 0; adx < obj.applied.length; adx++) {\r\n            var newCard: XCalc = new XCalc();\r\n            newCard.no = obj.applied[adx].no;\r\n            newCard.op = obj.applied[adx].op;\r\n            newCard.setUniqueId(engine, obj.applied[adx].uniqueId);\r\n            appArr.push(newCard);\r\n        }\r\n        result.setApplied(appArr, engine);\r\n        result.setDifficulty(obj.difficulty, engine);\r\n        result.setCustomAIScript(obj.customAIScript, engine);\r\n        return result;\r\n    };\r\n};"]}